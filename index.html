<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Birthday Cake (local demo)</title>
    <script>"use strict";var BirthdayCake=(()=>{var it=Object.create;var A=Object.defineProperty;var rt=Object.getOwnPropertyDescriptor;var st=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,ot=Object.prototype.hasOwnProperty;var M=(r,i)=>()=>(i||r((i={exports:{}}).exports,i),i.exports),lt=(r,i)=>{for(var t in i)A(r,t,{get:i[t],enumerable:!0})},R=(r,i,t,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of st(i))!ot.call(r,s)&&s!==t&&A(r,s,{get:()=>i[s],enumerable:!(e=rt(i,s))||e.enumerable});return r};var N=(r,i,t)=>(t=r!=null?it(nt(r)):{},R(i||!r||!r.__esModule?A(t,"default",{value:r,enumerable:!0}):t,r)),at=r=>R(A({},"__esModule",{value:!0}),r);var H=M((jt,L)=>{"use strict";var kt=Object.prototype.hasOwnProperty,f="~";function v(){}Object.create&&(v.prototype=Object.create(null),new v().__proto__||(f=!1));function ct(r,i,t){this.fn=r,this.context=i,this.once=t||!1}function I(r,i,t,e,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new ct(t,e||r,s),o=f?f+i:i;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],l]:r._events[o].push(l):(r._events[o]=l,r._eventsCount++),r}function B(r,i){--r._eventsCount===0?r._events=new v:delete r._events[i]}function d(){this._events=new v,this._eventsCount=0}d.prototype.eventNames=function(){var i=[],t,e;if(this._eventsCount===0)return i;for(e in t=this._events)kt.call(t,e)&&i.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i};d.prototype.listeners=function(i){var t=f?f+i:i,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var s=0,l=e.length,o=new Array(l);s<l;s++)o[s]=e[s].fn;return o};d.prototype.listenerCount=function(i){var t=f?f+i:i,e=this._events[t];return e?e.fn?1:e.length:0};d.prototype.emit=function(i,t,e,s,l,o){var k=f?f+i:i;if(!this._events[k])return!1;var n=this._events[k],c=arguments.length,F,a;if(n.fn){switch(n.once&&this.removeListener(i,n.fn,void 0,!0),c){case 1:return n.fn.call(n.context),!0;case 2:return n.fn.call(n.context,t),!0;case 3:return n.fn.call(n.context,t,e),!0;case 4:return n.fn.call(n.context,t,e,s),!0;case 5:return n.fn.call(n.context,t,e,s,l),!0;case 6:return n.fn.call(n.context,t,e,s,l,o),!0}for(a=1,F=new Array(c-1);a<c;a++)F[a-1]=arguments[a];n.fn.apply(n.context,F)}else{var m=n.length,u;for(a=0;a<m;a++)switch(n[a].once&&this.removeListener(i,n[a].fn,void 0,!0),c){case 1:n[a].fn.call(n[a].context);break;case 2:n[a].fn.call(n[a].context,t);break;case 3:n[a].fn.call(n[a].context,t,e);break;case 4:n[a].fn.call(n[a].context,t,e,s);break;default:if(!F)for(u=1,F=new Array(c-1);u<c;u++)F[u-1]=arguments[u];n[a].fn.apply(n[a].context,F)}}return!0};d.prototype.on=function(i,t,e){return I(this,i,t,e,!1)};d.prototype.once=function(i,t,e){return I(this,i,t,e,!0)};d.prototype.removeListener=function(i,t,e,s){var l=f?f+i:i;if(!this._events[l])return this;if(!t)return B(this,l),this;var o=this._events[l];if(o.fn)o.fn===t&&(!s||o.once)&&(!e||o.context===e)&&B(this,l);else{for(var k=0,n=[],c=o.length;k<c;k++)(o[k].fn!==t||s&&!o[k].once||e&&o[k].context!==e)&&n.push(o[k]);n.length?this._events[l]=n.length===1?n[0]:n:B(this,l)}return this};d.prototype.removeAllListeners=function(i){var t;return i?(t=f?f+i:i,this._events[t]&&B(this,t)):(this._events=new v,this._eventsCount=0),this};d.prototype.off=d.prototype.removeListener;d.prototype.addListener=d.prototype.on;d.prefixed=f;d.EventEmitter=d;typeof L<"u"&&(L.exports=d)});var q=M((Bt,w)=>{"use strict";var p=256,G=6,Ft=52,y=[],g=typeof global>"u"?window:global,dt=Math.pow(p,G),V=Math.pow(2,Ft),ft=V*2,C=p-1,ut=Math.random;w.exports=function(r,i){if(i&&i.global===!0)return i.global=!1,Math.random=w.exports(r,i),i.global=!0,Math.random;var t=i&&i.entropy||!1,e=[],s=W($(t?[r,j(y)]:0 in arguments?r:pt(),3),e),l=new mt(e);return W(j(l.S),y),function(){for(var o=l.g(G),k=dt,n=0;o<V;)o=(o+n)*p,k*=p,n=l.g(1);for(;o>=ft;)o/=2,k/=2,n>>>=1;return(o+n)/k}};w.exports.resetGlobal=function(){Math.random=ut};function mt(r){var i,t=r.length,e=this,s=0,l=e.i=e.j=0,o=e.S=[];for(t||(r=[t++]);s<p;)o[s]=s++;for(s=0;s<p;s++)o[s]=o[l=C&l+r[s%t]+(i=o[s])],o[l]=i;(e.g=function(k){for(var n,c=0,F=e.i,a=e.j,m=e.S;k--;)n=m[F=C&F+1],c=c*p+m[C&(m[F]=m[a=C&a+n])+(m[a]=n)];return e.i=F,e.j=a,c})(p)}function $(r,i){var t=[],e=(typeof r)[0],s;if(i&&e=="o")for(s in r)try{t.push($(r[s],i-1))}catch{}return t.length?t:e=="s"?r:r+"\0"}function W(r,i){for(var t=r+"",e,s=0;s<t.length;)i[C&s]=C&(e^=i[C&s]*19)+t.charCodeAt(s++);return j(i)}function pt(r){try{return g.crypto.getRandomValues(r=new Uint8Array(p)),j(r)}catch{return[+new Date,g,g.navigator&&g.navigator.plugins,g.screen,j(y)]}}function j(r){return String.fromCharCode.apply(0,r)}W(Math.random(),y)});var Q=M((yt,K)=>{"use strict";var J=q();K.exports=function(i,t){var e,s,l,o;if(t==null?o=J():o=J(t),i.constructor!==Array)throw new Error("Input is not an array");for(e=i.length;e!==0;)l=Math.floor(o()*e--),s=i[e],i[e]=i[l],i[l]=s;return i}});var vt={};lt(vt,{LocalApp:()=>T});var U=N(H(),1);var E=U.default;var X=N(Q()),D=class extends E{constructor(t){super();this.running=!1;this.lastTickTime=0;t=structuredClone(t),this.options=t,this.state={windForce:0,clientCount:0,totalWindForce:{x:0,z:0},candles:[]}}updateServerState(t){let{log2:e,floor:s,ceil:l,sin:o,cos:k,PI:n}=Math;if(this.state.clientCount=t.clientCount,this.state.totalWindForce.x=t.totalWindForce*k(this.options.windPhi),this.state.totalWindForce.z=t.totalWindForce*o(this.options.windPhi),this.state.candles.length!==t.candleCount){if(this.state.candles.splice(0,this.state.candles.length),t.candleCount!==0){let F=t.candleCount,a=l(e(F)),m=.9/a;for(let u=0;u<F;u++){let h=s(e(u+1)),Z=2**(h+1)<=F?2**h:F-2**h+1,z=h*m,tt=2*n/Z,et=u-(2**h-1),P=tt*et+n*h/a;this.state.candles.push({x:z*k(P),z:z*o(P),isLit:!0})}}(0,X.default)(this.state.candles,t.candleCount)}let c=0;for(let F of this.state.candles)F.isLit||(c+=1);for(;c>t.blownOutCandleCount;)c-=1,this.state.candles[c].isLit=!0;for(;c<t.blownOutCandleCount;)this.state.candles[c].isLit=!1,c+=1}updateClientState(t){this.state.windForce=t.windForce}tick(t){this.emit("tick",this.state)}start(){if(this.running)return;this.running=!0,this.lastTickTime=performance.now();let t=()=>{try{let e=performance.now(),s=e-this.lastTickTime;this.tick(s),this.lastTickTime=e,this.running?setTimeout(t,this.options.msPerTick):this.emit("stop")}catch(e){this.emit("error",e)}};setTimeout(()=>{this.emit("start"),t()},this.options.msPerTick)}stop(){this.running=!1}};var S=class extends E{constructor({bufferMs:t}){super();this.ctx=null;this.mediaStreamSource=null;this.analyser=null;navigator.mediaDevices.getUserMedia({audio:{sampleRate:8e3,noiseSuppression:!1}}).then(e=>{this.ctx=new AudioContext({sampleRate:e.getAudioTracks()[0].getSettings().sampleRate}),this.data=new Float32Array(Math.ceil(this.ctx.sampleRate*(t/1e3))),this.mediaStreamSource=this.ctx.createMediaStreamSource(e),this.analyser=this.ctx.createAnalyser(),this.mediaStreamSource.connect(this.analyser),this.emit("open")}).catch(e=>{this.emit("error",e)})}close(){this.analyser?.disconnect(),this.mediaStreamSource?.disconnect(),this.ctx?.close().then(()=>this.emit("close")).catch(t=>this.emit("error",t))}getNoiseLevel(){if(!this.data||!this.analyser)return 0;this.analyser.getFloatTimeDomainData(this.data);let t=0,e=this.data[0],s=this.data[0];for(let k=1;k<this.data.length;k++)t+=(this.data[k]-this.data[k-1])**2,e=Math.min(e,this.data[k]),s=Math.max(s,this.data[k]);let l=Math.max(s-e,.1),o=this.data.length;return t/(l*o)}};var Y='data:image/svg+xml,<svg version="1.1" viewBox="0 0 640 640" xmlns="http://www.w3.org/2000/svg"><style type="text/css">.st0{opacity:0.15;fill:%2345413C;}%0A%09.st1{fill:%23FFE500;}%0A%09.st2{fill:%23EBCB00;}%0A%09.st3{fill:none;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st4{fill:%23FFAA54;}%0A%09.st5{fill:%23FF8A14;}%0A%09.st6{fill:%23FFB0CA;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st7{fill:%23FF87AF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st8{fill:%23FFCC99;}%0A%09.st9{fill:%23FFFFFF;}%0A%09.st10{fill:%23F0F0F0;}%0A%09.st11{fill:%23BF8256;}%0A%09.st12{fill:%23915E3A;}%0A%09.st13{fill:%23DEA47A;}%0A%09.st14{fill:%23F0D5A8;}%0A%09.st15{fill:%23DEBB7E;}%0A%09.st16{fill:%23F7E5C6;}%0A%09.st17{fill:%23FF8A14;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st18{fill:%23FFF5E3;}%0A%09.st19{fill:%23FFF48C;}%0A%09.st20{fill:%23FFFACF;}%0A%09.st21{fill:%23FFFCE5;}%0A%09.st22{fill:%23FF87AF;}%0A%09.st23{fill:%23FFB0CA;}%0A%09.st24{fill:%23FFE500;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st25{fill:%239CEB60;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st26{fill:%23FFFACF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st27{fill:%2300F5BC;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st28{fill:%23BF8256;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st29{fill:%23FFE3CF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st30{fill:%23FF6242;}%0A%09.st31{fill:%23FF866E;}%0A%09.st32{fill:none;stroke:%23E04122;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st33{fill:%23FFFEF2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st34{fill:%23FF6242;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st35{fill:%23FFA694;}%0A%09.st36{fill:%23FFFFFF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st37{fill:%23FFFEF2;}%0A%09.st38{fill:%23FF6196;}%0A%09.st39{fill:%23B89558;}%0A%09.st40{fill:none;stroke:%23915E3A;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st41{fill:%23DEBB7E;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st42{fill:%236DD627;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st43{fill:%23E5F8FF;}%0A%09.st44{fill:%23E8F4FA;}%0A%09.st45{fill:%23E8F4FA;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st46{fill:%23FFCCDD;}%0A%09.st47{fill:%23E5F8FF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st48{fill:%2300B8F0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st49{fill:%2300B8F0;}%0A%09.st50{fill:%234ACFFF;}%0A%09.st51{fill:%23E04122;}%0A%09.st52{fill:%23E04122;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st53{fill:%2387898C;}%0A%09.st54{fill:%23BDBEC0;}%0A%09.st55{fill:%23656769;}%0A%09.st56{fill:%23525252;}%0A%09.st57{fill:%23FFF48C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st58{fill:%236DD627;}%0A%09.st59{fill:%23EB6D00;}%0A%09.st60{fill:%2346B000;}%0A%09.st61{fill:%2380DDFF;}%0A%09.st62{fill:%23DAEDF7;}%0A%09.st63{fill:%23BF8DF2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st64{fill:%239F5AE5;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st65{fill:%23C8FFA1;}%0A%09.st66{fill:%23E4FFD1;}%0A%09.st67{fill:%239CEB60;}%0A%09.st68{fill:%23E5FEFF;}%0A%09.st69{fill:%23B8ECFF;}%0A%09.st70{fill:%23E0E0E0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st71{fill:%23E0E0E0;}%0A%09.st72{fill:none;stroke:%234F4B45;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st73{fill:none;stroke:%234F4B45;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st74{fill:%23E0366F;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st75{fill:none;stroke:%2345413C;stroke-miterlimit:10;}%0A%09.st76{fill:%23FF866E;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st77{fill:%2345413C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st78{fill:%239F5AE5;}%0A%09.st79{fill:%23803EC2;}%0A%09.st80{fill:%23803EC2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st81{fill:%23BF8DF2;}%0A%09.st82{fill:%23FFAA54;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st83{fill:none;stroke:%2345413C;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st84{fill:%23FFCCDD;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st85{fill:%23FF6196;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st86{fill:%23FFE5EE;}%0A%09.st87{fill:%23F7E5C6;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st88{fill:%23E5FFF9;}%0A%09.st89{fill:none;stroke:%2345413C;stroke-width:1.0064;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st90{fill:%234AEFF7;}%0A%09.st91{fill:%23A6FBFF;}%0A%09.st92{fill:%23E5FEFF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st93{fill:%2346B000;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st94{fill:%23FFFFFF;stroke:%2345413C;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st95{fill:%23FFFFFF;stroke:%2345413C;stroke-miterlimit:10;}%0A%09.st96{fill:%23009FD9;}%0A%09.st97{fill:%2300DFEB;}%0A%09.st98{fill:%23C0DCEB;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st99{fill:%2300DFEB;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st100{fill:%23FFE5EE;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st101{fill:%238CA4B8;}%0A%09.st102{fill:%23ADC4D9;}%0A%09.st103{fill:%23656769;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st104{fill:%23F0F0F0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st105{fill:%23C0DCEB;}%0A%09.st106{fill:%2345413C;}%0A%09.st107{fill:%23FFCABF;}%0A%09.st108{fill:%2387898C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st109{fill:%23EBCB00;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g transform="matrix(15.047 0 0 15.047 -41.118 -56.193)"><path class="st28" d="m6.5 24c0 3.6 7.8 6.5 17.5 6.5s17.5-2.9 17.5-6.5v15c0 3.6-7.8 6.5-17.5 6.5s-17.5-2.9-17.5-6.5z"/><path class="st29" d="m6.5 30c0 3.6 7.8 6.5 17.5 6.5s17.5-2.9 17.5-6.5v5c0 3.6-7.8 6.5-17.5 6.5s-17.5-2.9-17.5-6.5z"/><path class="st30" d="m30.5 33.5c0-0.3 0.2-0.5 0.5-0.5s0.5 0.2 0.5 0.5c0 1.4 1.1 2.5 2.5 2.5s2.5-1.1 2.5-2.5v-2c0-0.8 0.7-1.5 1.5-1.5s1.5 0.7 1.5 1.5 0.7 1.5 1.5 1.5 1.5-0.7 1.5-1.5v-7.5c0-3.6-8.3-6.5-18.5-6.5s-18.5 2.9-18.5 6.5v8c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5 0.7-1.5 1.5-1.5 1.5 0.7 1.5 1.5v3c0 1.4 1.1 2.5 2.5 2.5s2.5-1.1 2.5-2.5c0-0.8 0.7-1.5 1.5-1.5s1.5 0.7 1.5 1.5v1c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5v-0.5c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5v1.5c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5z"/><path class="st31" d="m24 20c7.4 0 14 1 18.1 2.6-1.8-2.9-9.2-5.1-18.1-5.1s-16.3 2.2-18.1 5.1c4.1-1.6 10.7-2.6 18.1-2.6z"/><path class="st3" d="m30.5 33.5c0-0.3 0.2-0.5 0.5-0.5s0.5 0.2 0.5 0.5c0 1.4 1.1 2.5 2.5 2.5s2.5-1.1 2.5-2.5v-2c0-0.8 0.7-1.5 1.5-1.5s1.5 0.7 1.5 1.5 0.7 1.5 1.5 1.5 1.5-0.7 1.5-1.5v-7.5c0-3.6-8.3-6.5-18.5-6.5s-18.5 2.9-18.5 6.5v8c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5 0.7-1.5 1.5-1.5 1.5 0.7 1.5 1.5v3c0 1.4 1.1 2.5 2.5 2.5s2.5-1.1 2.5-2.5c0-0.8 0.7-1.5 1.5-1.5s1.5 0.7 1.5 1.5v1c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5v-0.5c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5v1.5c0 0.8 0.7 1.5 1.5 1.5s1.5-0.7 1.5-1.5z"/><path class="st32" d="m40.5 24c0 2.5-7.4 4.5-16.5 4.5s-16.5-2-16.5-4.5"/></g></svg>%0A';var x='data:image/svg+xml,<svg version="1.1" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><style type="text/css">.st0{opacity:0.15;fill:%2345413C;}%0A%09.st1{fill:%23FFE500;}%0A%09.st2{fill:%23EBCB00;}%0A%09.st3{fill:none;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st4{fill:%23FFAA54;}%0A%09.st5{fill:%23FF8A14;}%0A%09.st6{fill:%23FFB0CA;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st7{fill:%23FF87AF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st8{fill:%23FFCC99;}%0A%09.st9{fill:%23FFFFFF;}%0A%09.st10{fill:%23F0F0F0;}%0A%09.st11{fill:%23BF8256;}%0A%09.st12{fill:%23915E3A;}%0A%09.st13{fill:%23DEA47A;}%0A%09.st14{fill:%23F0D5A8;}%0A%09.st15{fill:%23DEBB7E;}%0A%09.st16{fill:%23F7E5C6;}%0A%09.st17{fill:%23FF8A14;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st18{fill:%23FFF5E3;}%0A%09.st19{fill:%23FFF48C;}%0A%09.st20{fill:%23FFFACF;}%0A%09.st21{fill:%23FFFCE5;}%0A%09.st22{fill:%23FF87AF;}%0A%09.st23{fill:%23FFB0CA;}%0A%09.st24{fill:%23FFE500;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st25{fill:%239CEB60;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st26{fill:%23FFFACF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st27{fill:%2300F5BC;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st28{fill:%23BF8256;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st29{fill:%23FFE3CF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st30{fill:%23FF6242;}%0A%09.st31{fill:%23FF866E;}%0A%09.st32{fill:none;stroke:%23E04122;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st33{fill:%23FFFEF2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st34{fill:%23FF6242;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st35{fill:%23FFA694;}%0A%09.st36{fill:%23FFFFFF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st37{fill:%23FFFEF2;}%0A%09.st38{fill:%23FF6196;}%0A%09.st39{fill:%23B89558;}%0A%09.st40{fill:none;stroke:%23915E3A;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st41{fill:%23DEBB7E;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st42{fill:%236DD627;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st43{fill:%23E5F8FF;}%0A%09.st44{fill:%23E8F4FA;}%0A%09.st45{fill:%23E8F4FA;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st46{fill:%23FFCCDD;}%0A%09.st47{fill:%23E5F8FF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st48{fill:%2300B8F0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st49{fill:%2300B8F0;}%0A%09.st50{fill:%234ACFFF;}%0A%09.st51{fill:%23E04122;}%0A%09.st52{fill:%23E04122;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st53{fill:%2387898C;}%0A%09.st54{fill:%23BDBEC0;}%0A%09.st55{fill:%23656769;}%0A%09.st56{fill:%23525252;}%0A%09.st57{fill:%23FFF48C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st58{fill:%236DD627;}%0A%09.st59{fill:%23EB6D00;}%0A%09.st60{fill:%2346B000;}%0A%09.st61{fill:%2380DDFF;}%0A%09.st62{fill:%23DAEDF7;}%0A%09.st63{fill:%23BF8DF2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st64{fill:%239F5AE5;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st65{fill:%23C8FFA1;}%0A%09.st66{fill:%23E4FFD1;}%0A%09.st67{fill:%239CEB60;}%0A%09.st68{fill:%23E5FEFF;}%0A%09.st69{fill:%23B8ECFF;}%0A%09.st70{fill:%23E0E0E0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st71{fill:%23E0E0E0;}%0A%09.st72{fill:none;stroke:%234F4B45;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st73{fill:none;stroke:%234F4B45;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st74{fill:%23E0366F;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st75{fill:none;stroke:%2345413C;stroke-miterlimit:10;}%0A%09.st76{fill:%23FF866E;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st77{fill:%2345413C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st78{fill:%239F5AE5;}%0A%09.st79{fill:%23803EC2;}%0A%09.st80{fill:%23803EC2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st81{fill:%23BF8DF2;}%0A%09.st82{fill:%23FFAA54;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st83{fill:none;stroke:%2345413C;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st84{fill:%23FFCCDD;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st85{fill:%23FF6196;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st86{fill:%23FFE5EE;}%0A%09.st87{fill:%23F7E5C6;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st88{fill:%23E5FFF9;}%0A%09.st89{fill:none;stroke:%2345413C;stroke-width:1.0064;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st90{fill:%234AEFF7;}%0A%09.st91{fill:%23A6FBFF;}%0A%09.st92{fill:%23E5FEFF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st93{fill:%2346B000;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st94{fill:%23FFFFFF;stroke:%2345413C;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st95{fill:%23FFFFFF;stroke:%2345413C;stroke-miterlimit:10;}%0A%09.st96{fill:%23009FD9;}%0A%09.st97{fill:%2300DFEB;}%0A%09.st98{fill:%23C0DCEB;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st99{fill:%2300DFEB;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st100{fill:%23FFE5EE;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st101{fill:%238CA4B8;}%0A%09.st102{fill:%23ADC4D9;}%0A%09.st103{fill:%23656769;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st104{fill:%23F0F0F0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st105{fill:%23C0DCEB;}%0A%09.st106{fill:%2345413C;}%0A%09.st107{fill:%23FFCABF;}%0A%09.st108{fill:%2387898C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st109{fill:%23EBCB00;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g transform="matrix(3.0918 0 0 3.0918 -42.321 -2.9378)"><path class="st33" d="m26 19.5v-8c0-0.6-0.4-1-1-1h-2c-0.6 0-1 0.4-1 1v8s0.5 1 2 1 2-1 2-1z"/><path class="st24" d="m21.7 5.6c-0.3 1.3 0.5 2.6 1.8 2.9s2.6-0.5 2.9-1.8c0.4-1.7-2.2-2-2.2-4.6-1.7 1-2.2 2.2-2.5 3.5z"/></g></svg>%0A';var _='data:image/svg+xml,<svg version="1.1" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><style type="text/css">.st0{opacity:0.15;fill:%2345413C;}%0A%09.st1{fill:%23FFE500;}%0A%09.st2{fill:%23EBCB00;}%0A%09.st3{fill:none;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st4{fill:%23FFAA54;}%0A%09.st5{fill:%23FF8A14;}%0A%09.st6{fill:%23FFB0CA;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st7{fill:%23FF87AF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st8{fill:%23FFCC99;}%0A%09.st9{fill:%23FFFFFF;}%0A%09.st10{fill:%23F0F0F0;}%0A%09.st11{fill:%23BF8256;}%0A%09.st12{fill:%23915E3A;}%0A%09.st13{fill:%23DEA47A;}%0A%09.st14{fill:%23F0D5A8;}%0A%09.st15{fill:%23DEBB7E;}%0A%09.st16{fill:%23F7E5C6;}%0A%09.st17{fill:%23FF8A14;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st18{fill:%23FFF5E3;}%0A%09.st19{fill:%23FFF48C;}%0A%09.st20{fill:%23FFFACF;}%0A%09.st21{fill:%23FFFCE5;}%0A%09.st22{fill:%23FF87AF;}%0A%09.st23{fill:%23FFB0CA;}%0A%09.st24{fill:%23FFE500;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st25{fill:%239CEB60;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st26{fill:%23FFFACF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st27{fill:%2300F5BC;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st28{fill:%23BF8256;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st29{fill:%23FFE3CF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st30{fill:%23FF6242;}%0A%09.st31{fill:%23FF866E;}%0A%09.st32{fill:none;stroke:%23E04122;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st33{fill:%23FFFEF2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st34{fill:%23FF6242;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st35{fill:%23FFA694;}%0A%09.st36{fill:%23FFFFFF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st37{fill:%23FFFEF2;}%0A%09.st38{fill:%23FF6196;}%0A%09.st39{fill:%23B89558;}%0A%09.st40{fill:none;stroke:%23915E3A;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st41{fill:%23DEBB7E;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st42{fill:%236DD627;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st43{fill:%23E5F8FF;}%0A%09.st44{fill:%23E8F4FA;}%0A%09.st45{fill:%23E8F4FA;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st46{fill:%23FFCCDD;}%0A%09.st47{fill:%23E5F8FF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st48{fill:%2300B8F0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st49{fill:%2300B8F0;}%0A%09.st50{fill:%234ACFFF;}%0A%09.st51{fill:%23E04122;}%0A%09.st52{fill:%23E04122;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st53{fill:%2387898C;}%0A%09.st54{fill:%23BDBEC0;}%0A%09.st55{fill:%23656769;}%0A%09.st56{fill:%23525252;}%0A%09.st57{fill:%23FFF48C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st58{fill:%236DD627;}%0A%09.st59{fill:%23EB6D00;}%0A%09.st60{fill:%2346B000;}%0A%09.st61{fill:%2380DDFF;}%0A%09.st62{fill:%23DAEDF7;}%0A%09.st63{fill:%23BF8DF2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st64{fill:%239F5AE5;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st65{fill:%23C8FFA1;}%0A%09.st66{fill:%23E4FFD1;}%0A%09.st67{fill:%239CEB60;}%0A%09.st68{fill:%23E5FEFF;}%0A%09.st69{fill:%23B8ECFF;}%0A%09.st70{fill:%23E0E0E0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st71{fill:%23E0E0E0;}%0A%09.st72{fill:none;stroke:%234F4B45;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st73{fill:none;stroke:%234F4B45;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st74{fill:%23E0366F;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st75{fill:none;stroke:%2345413C;stroke-miterlimit:10;}%0A%09.st76{fill:%23FF866E;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st77{fill:%2345413C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st78{fill:%239F5AE5;}%0A%09.st79{fill:%23803EC2;}%0A%09.st80{fill:%23803EC2;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st81{fill:%23BF8DF2;}%0A%09.st82{fill:%23FFAA54;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st83{fill:none;stroke:%2345413C;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st84{fill:%23FFCCDD;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st85{fill:%23FF6196;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st86{fill:%23FFE5EE;}%0A%09.st87{fill:%23F7E5C6;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st88{fill:%23E5FFF9;}%0A%09.st89{fill:none;stroke:%2345413C;stroke-width:1.0064;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st90{fill:%234AEFF7;}%0A%09.st91{fill:%23A6FBFF;}%0A%09.st92{fill:%23E5FEFF;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st93{fill:%2346B000;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st94{fill:%23FFFFFF;stroke:%2345413C;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st95{fill:%23FFFFFF;stroke:%2345413C;stroke-miterlimit:10;}%0A%09.st96{fill:%23009FD9;}%0A%09.st97{fill:%2300DFEB;}%0A%09.st98{fill:%23C0DCEB;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st99{fill:%2300DFEB;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st100{fill:%23FFE5EE;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st101{fill:%238CA4B8;}%0A%09.st102{fill:%23ADC4D9;}%0A%09.st103{fill:%23656769;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st104{fill:%23F0F0F0;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st105{fill:%23C0DCEB;}%0A%09.st106{fill:%2345413C;}%0A%09.st107{fill:%23FFCABF;}%0A%09.st108{fill:%2387898C;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}%0A%09.st109{fill:%23EBCB00;stroke:%2345413C;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g transform="matrix(3.0918 0 0 3.0918 -42.321 -2.9378)"><path class="st33" d="m26 19.5v-8c0-0.6-0.4-1-1-1h-2c-0.6 0-1 0.4-1 1v8s0.5 1 2 1 2-1 2-1z"/></g></svg>%0A';var b=class{constructor({containerElement:i}){this.candleSvgs=[];this.containerElement=i,Object.assign(this.containerElement.style,{position:"fixed",width:"100vmin",height:"100vmin",top:"0",left:"0",bottom:"0",right:"0",margin:"auto"}),this.cakeSvg=document.createElement("img"),Object.assign(this.cakeSvg,{src:Y}),Object.assign(this.cakeSvg.style,{width:"100%",height:"100%"}),this.candleSvgTemplate=document.createElement("img"),Object.assign(this.candleSvgTemplate,{src:x}),Object.assign(this.candleSvgTemplate.style,{position:"absolute",width:"auto",height:"16%"}),this.containerElement.replaceChildren(this.cakeSvg)}updateEngineState(i){if(this.candleSvgs.length!==i.candles.length){this.containerElement.replaceChildren(this.cakeSvg),this.candleSvgs.splice(0,this.candleSvgs.length);for(let t of i.candles){let e=this.candleSvgTemplate.cloneNode();e.dataset.isLit=t.isLit?"true":"",e.src=t.isLit?x:_,Object.assign(e.style,{left:`${44+48*t.x}%`,top:`${30+14*t.z}%`,zIndex:Math.round(1e3*(1+t.z))}),this.containerElement.appendChild(e),this.candleSvgs.push(e)}}else for(let t=0;t<this.candleSvgs.length;t++)this.candleSvgs[t].dataset.isLit&&!i.candles[t].isLit&&(this.candleSvgs[t].src=_,this.candleSvgs[t].dataset.isLit=""),!this.candleSvgs[t].dataset.isLit&&i.candles[t].isLit&&(this.candleSvgs[t].src=x,this.candleSvgs[t].dataset.isLit="true")}};var O=class extends E{constructor(t){super();this.running=!1;this.lastTickTime=0;this.clientStates=new Map;t=structuredClone(t),this.options=t,this.state={clientCount:0,candleCount:t.candleCount,blownOutCandleCount:0,totalWindForce:0,targetWindForce:0,msAtTargetWindForce:0}}addClient(t){this.clientStates.set(t,{windForce:0}),this.state.clientCount=this.clientStates.size,this.state.targetWindForce=this.state.clientCount*this.options.targetWindForcePerClient}removeClient(t){this.clientStates.delete(t),this.state.clientCount=this.clientStates.size,this.state.targetWindForce=this.state.clientCount*this.options.targetWindForcePerClient}updateClientState(t,e){this.clientStates.set(t,e)}reset(){this.state.blownOutCandleCount=0,this.state.msAtTargetWindForce=0,this.emit("reset")}tick(t){let{state:e,clientStates:s,options:l}=this;e.totalWindForce=0;for(let o of s.values())e.totalWindForce+=o.windForce;if(e.totalWindForce===0)e.msAtTargetWindForce=0;else if(e.blownOutCandleCount===0&&e.totalWindForce<e.targetWindForce*l.firstCandleWindForceFactor)e.msAtTargetWindForce=0;else if(e.totalWindForce<e.targetWindForce)e.msAtTargetWindForce=0;else for(e.msAtTargetWindForce+=t;e.msAtTargetWindForce>=l.candleLifetimeMs;)e.msAtTargetWindForce-=l.candleLifetimeMs,e.blownOutCandleCount<e.candleCount&&(e.blownOutCandleCount+=1);this.emit("tick",this.state)}start(){if(this.running)return;this.running=!0,this.lastTickTime=performance.now();let t=()=>{try{let e=performance.now(),s=e-this.lastTickTime;this.tick(s),this.lastTickTime=e,this.running?setTimeout(t,this.options.msPerTick):this.emit("stop")}catch(e){this.emit("error",e)}};setTimeout(()=>{this.emit("start"),t()},this.options.msPerTick)}stop(){this.running=!1}};var T=class{constructor(i){this.serverEngine=new O(i.serverEngine),this.serverEngine.on("start",()=>console.log("server engine started")),this.serverEngine.on("stop",()=>console.log("server engine stopped")),this.serverEngine.on("error",t=>console.error("server engine error",t)),this.clientEngine=new D(i.clientEngine),this.clientEngine.on("start",()=>console.log("client engine started")),this.clientEngine.on("stop",()=>console.log("client engine stopped")),this.clientEngine.on("error",t=>console.error("client engine error",t)),this.noiseAnalyser=new S(i.noiseAnalyser),this.noiseAnalyser.on("open",()=>console.log("noise analyser initialized")),this.noiseAnalyser.on("close",()=>console.log("noise analyser closed")),this.noiseAnalyser.on("error",t=>console.error("noise analyser error",t)),this.renderer=new b(i.renderer),this.serverEngine.on("tick",t=>{this.clientEngine.updateServerState(t)}),this.clientEngine.on("tick",t=>{this.serverEngine.updateClientState(null,t),this.renderer.updateEngineState(t);let e=this.noiseAnalyser.getNoiseLevel();console.debug(e.toFixed(3)),this.clientEngine.updateClientState({windForce:e})}),this.serverEngine.start(),this.clientEngine.start(),this.serverEngine.addClient(null)}stop(){this.serverEngine.removeClient(null),this.serverEngine.stop(),this.clientEngine.stop(),this.noiseAnalyser.close()}};return at(vt);})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL2V2ZW50ZW1pdHRlcjMvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NlZWQtcmFuZG9tL2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9rbnV0aC1zaHVmZmxlLXNlZWRlZC9pbmRleC5qcyIsICJsb2NhbC1tYWluLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4Lm1qcyIsICJjbGllbnQtZW5naW5lLnRzIiwgIm5vaXNlLWFuYWx5c2VyLnRzIiwgInJlbmRlcmVyLnRzIiwgInNlcnZlci1lbmdpbmUudHMiLCAibG9jYWwtYXBwLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIndXNlIHN0cmljdCc7XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5XG4gICwgcHJlZml4ID0gJ34nO1xuXG4vKipcbiAqIENvbnN0cnVjdG9yIHRvIGNyZWF0ZSBhIHN0b3JhZ2UgZm9yIG91ciBgRUVgIG9iamVjdHMuXG4gKiBBbiBgRXZlbnRzYCBpbnN0YW5jZSBpcyBhIHBsYWluIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIGFyZSBldmVudCBuYW1lcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEV2ZW50cygpIHt9XG5cbi8vXG4vLyBXZSB0cnkgdG8gbm90IGluaGVyaXQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuIEluIHNvbWUgZW5naW5lcyBjcmVhdGluZyBhblxuLy8gaW5zdGFuY2UgaW4gdGhpcyB3YXkgaXMgZmFzdGVyIHRoYW4gY2FsbGluZyBgT2JqZWN0LmNyZWF0ZShudWxsKWAgZGlyZWN0bHkuXG4vLyBJZiBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgbm90IHN1cHBvcnRlZCB3ZSBwcmVmaXggdGhlIGV2ZW50IG5hbWVzIHdpdGggYVxuLy8gY2hhcmFjdGVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBidWlsdC1pbiBvYmplY3QgcHJvcGVydGllcyBhcmUgbm90XG4vLyBvdmVycmlkZGVuIG9yIHVzZWQgYXMgYW4gYXR0YWNrIHZlY3Rvci5cbi8vXG5pZiAoT2JqZWN0LmNyZWF0ZSkge1xuICBFdmVudHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvL1xuICAvLyBUaGlzIGhhY2sgaXMgbmVlZGVkIGJlY2F1c2UgdGhlIGBfX3Byb3RvX19gIHByb3BlcnR5IGlzIHN0aWxsIGluaGVyaXRlZCBpblxuICAvLyBzb21lIG9sZCBicm93c2VycyBsaWtlIEFuZHJvaWQgNCwgaVBob25lIDUuMSwgT3BlcmEgMTEgYW5kIFNhZmFyaSA1LlxuICAvL1xuICBpZiAoIW5ldyBFdmVudHMoKS5fX3Byb3RvX18pIHByZWZpeCA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvbmNlPWZhbHNlXSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFRShmbiwgY29udGV4dCwgb25jZSkge1xuICB0aGlzLmZuID0gZm47XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMub25jZSA9IG9uY2UgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBsaXN0ZW5lciA9IG5ldyBFRShmbiwgY29udGV4dCB8fCBlbWl0dGVyLCBvbmNlKVxuICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdKSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IGxpc3RlbmVyLCBlbWl0dGVyLl9ldmVudHNDb3VudCsrO1xuICBlbHNlIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0uZm4pIGVtaXR0ZXIuX2V2ZW50c1tldnRdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gW2VtaXR0ZXIuX2V2ZW50c1tldnRdLCBsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIGVtaXR0ZXI7XG59XG5cbi8qKlxuICogQ2xlYXIgZXZlbnQgYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2dCBUaGUgRXZlbnQgbmFtZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRXZlbnQoZW1pdHRlciwgZXZ0KSB7XG4gIGlmICgtLWVtaXR0ZXIuX2V2ZW50c0NvdW50ID09PSAwKSBlbWl0dGVyLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIGVsc2UgZGVsZXRlIGVtaXR0ZXIuX2V2ZW50c1tldnRdO1xufVxuXG4vKipcbiAqIE1pbmltYWwgYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcbiAqIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgbGlzdGluZyB0aGUgZXZlbnRzIGZvciB3aGljaCB0aGUgZW1pdHRlciBoYXMgcmVnaXN0ZXJlZFxuICogbGlzdGVuZXJzLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgdmFyIG5hbWVzID0gW11cbiAgICAsIGV2ZW50c1xuICAgICwgbmFtZTtcblxuICBpZiAodGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHJldHVybiBuYW1lcztcblxuICBmb3IgKG5hbWUgaW4gKGV2ZW50cyA9IHRoaXMuX2V2ZW50cykpIHtcbiAgICBpZiAoaGFzLmNhbGwoZXZlbnRzLCBuYW1lKSkgbmFtZXMucHVzaChwcmVmaXggPyBuYW1lLnNsaWNlKDEpIDogbmFtZSk7XG4gIH1cblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHJldHVybiBuYW1lcy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhldmVudHMpKTtcbiAgfVxuXG4gIHJldHVybiBuYW1lcztcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFRoZSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGhhbmRsZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFoYW5kbGVycykgcmV0dXJuIFtdO1xuICBpZiAoaGFuZGxlcnMuZm4pIHJldHVybiBbaGFuZGxlcnMuZm5dO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xuICAgIGVlW2ldID0gaGFuZGxlcnNbaV0uZm47XG4gIH1cblxuICByZXR1cm4gZWU7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGxpc3RlbmVycyBsaXN0ZW5pbmcgdG8gYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gbGlzdGVuZXJDb3VudChldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiAwO1xuICBpZiAobGlzdGVuZXJzLmZuKSByZXR1cm4gMTtcbiAgcmV0dXJuIGxpc3RlbmVycy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIENhbGxzIGVhY2ggb2YgdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhZCBsaXN0ZW5lcnMsIGVsc2UgYGZhbHNlYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiBmYWxzZTtcblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF1cbiAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAsIGFyZ3NcbiAgICAsIGk7XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChsaXN0ZW5lcnMub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgc3dpdGNoIChsZW4pIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSksIHRydWU7XG4gICAgICBjYXNlIDM6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCksIHRydWU7XG4gICAgICBjYXNlIDY6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQsIGE1KSwgdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGkgPCBsZW47IGkrKykge1xuICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZuLmFwcGx5KGxpc3RlbmVycy5jb250ZXh0LCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aFxuICAgICAgLCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tpXS5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgICAgc3dpdGNoIChsZW4pIHtcbiAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xuICAgICAgICBjYXNlIDI6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSk7IGJyZWFrO1xuICAgICAgICBjYXNlIDM6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIpOyBicmVhaztcbiAgICAgICAgY2FzZSA0OiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyLCBhMyk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghYXJncykgZm9yIChqID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpc3RlbmVyc1tpXS5mbi5hcHBseShsaXN0ZW5lcnNbaV0uY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogQWRkIGEgb25lLXRpbWUgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVycyBvZiBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBtYXRjaCB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBoYXZlIHRoaXMgY29udGV4dC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBPbmx5IHJlbW92ZSBvbmUtdGltZSBsaXN0ZW5lcnMuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIHRoaXM7XG4gIGlmICghZm4pIHtcbiAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChcbiAgICAgIGxpc3RlbmVycy5mbiA9PT0gZm4gJiZcbiAgICAgICghb25jZSB8fCBsaXN0ZW5lcnMub25jZSkgJiZcbiAgICAgICghY29udGV4dCB8fCBsaXN0ZW5lcnMuY29udGV4dCA9PT0gY29udGV4dClcbiAgICApIHtcbiAgICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGV2ZW50cyA9IFtdLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgbGlzdGVuZXJzW2ldLmZuICE9PSBmbiB8fFxuICAgICAgICAob25jZSAmJiAhbGlzdGVuZXJzW2ldLm9uY2UpIHx8XG4gICAgICAgIChjb250ZXh0ICYmIGxpc3RlbmVyc1tpXS5jb250ZXh0ICE9PSBjb250ZXh0KVxuICAgICAgKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBSZXNldCB0aGUgYXJyYXksIG9yIHJlbW92ZSBpdCBjb21wbGV0ZWx5IGlmIHdlIGhhdmUgbm8gbW9yZSBsaXN0ZW5lcnMuXG4gICAgLy9cbiAgICBpZiAoZXZlbnRzLmxlbmd0aCkgdGhpcy5fZXZlbnRzW2V2dF0gPSBldmVudHMubGVuZ3RoID09PSAxID8gZXZlbnRzWzBdIDogZXZlbnRzO1xuICAgIGVsc2UgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgbGlzdGVuZXJzLCBvciB0aG9zZSBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBbZXZlbnRdIFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0O1xuXG4gIGlmIChldmVudCkge1xuICAgIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldnRdKSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy9cbi8vIEFsaWFzIG1ldGhvZHMgbmFtZXMgYmVjYXVzZSBwZW9wbGUgcm9sbCBsaWtlIHRoYXQuXG4vL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XG5cbi8vXG4vLyBFeHBvc2UgdGhlIHByZWZpeC5cbi8vXG5FdmVudEVtaXR0ZXIucHJlZml4ZWQgPSBwcmVmaXg7XG5cbi8vXG4vLyBBbGxvdyBgRXZlbnRFbWl0dGVyYCB0byBiZSBpbXBvcnRlZCBhcyBtb2R1bGUgbmFtZXNwYWNlLlxuLy9cbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5pZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBtb2R1bGUpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG59XG4iLCAiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIHdpZHRoID0gMjU2Oy8vIGVhY2ggUkM0IG91dHB1dCBpcyAwIDw9IHggPCAyNTZcclxudmFyIGNodW5rcyA9IDY7Ly8gYXQgbGVhc3Qgc2l4IFJDNCBvdXRwdXRzIGZvciBlYWNoIGRvdWJsZVxyXG52YXIgZGlnaXRzID0gNTI7Ly8gdGhlcmUgYXJlIDUyIHNpZ25pZmljYW50IGRpZ2l0cyBpbiBhIGRvdWJsZVxyXG52YXIgcG9vbCA9IFtdOy8vIHBvb2w6IGVudHJvcHkgcG9vbCBzdGFydHMgZW1wdHlcclxudmFyIEdMT0JBTCA9IHR5cGVvZiBnbG9iYWwgPT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsO1xyXG5cclxuLy9cclxuLy8gVGhlIGZvbGxvd2luZyBjb25zdGFudHMgYXJlIHJlbGF0ZWQgdG8gSUVFRSA3NTQgbGltaXRzLlxyXG4vL1xyXG52YXIgc3RhcnRkZW5vbSA9IE1hdGgucG93KHdpZHRoLCBjaHVua3MpLFxyXG4gICAgc2lnbmlmaWNhbmNlID0gTWF0aC5wb3coMiwgZGlnaXRzKSxcclxuICAgIG92ZXJmbG93ID0gc2lnbmlmaWNhbmNlICogMixcclxuICAgIG1hc2sgPSB3aWR0aCAtIDE7XHJcblxyXG5cclxudmFyIG9sZFJhbmRvbSA9IE1hdGgucmFuZG9tO1xyXG5cclxuLy9cclxuLy8gc2VlZHJhbmRvbSgpXHJcbi8vIFRoaXMgaXMgdGhlIHNlZWRyYW5kb20gZnVuY3Rpb24gZGVzY3JpYmVkIGFib3ZlLlxyXG4vL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNlZWQsIG9wdGlvbnMpIHtcclxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCA9PT0gdHJ1ZSkge1xyXG4gICAgb3B0aW9ucy5nbG9iYWwgPSBmYWxzZTtcclxuICAgIE1hdGgucmFuZG9tID0gbW9kdWxlLmV4cG9ydHMoc2VlZCwgb3B0aW9ucyk7XHJcbiAgICBvcHRpb25zLmdsb2JhbCA9IHRydWU7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb207XHJcbiAgfVxyXG4gIHZhciB1c2VfZW50cm9weSA9IChvcHRpb25zICYmIG9wdGlvbnMuZW50cm9weSkgfHwgZmFsc2U7XHJcbiAgdmFyIGtleSA9IFtdO1xyXG5cclxuICAvLyBGbGF0dGVuIHRoZSBzZWVkIHN0cmluZyBvciBidWlsZCBvbmUgZnJvbSBsb2NhbCBlbnRyb3B5IGlmIG5lZWRlZC5cclxuICB2YXIgc2hvcnRzZWVkID0gbWl4a2V5KGZsYXR0ZW4oXHJcbiAgICB1c2VfZW50cm9weSA/IFtzZWVkLCB0b3N0cmluZyhwb29sKV0gOlxyXG4gICAgMCBpbiBhcmd1bWVudHMgPyBzZWVkIDogYXV0b3NlZWQoKSwgMyksIGtleSk7XHJcblxyXG4gIC8vIFVzZSB0aGUgc2VlZCB0byBpbml0aWFsaXplIGFuIEFSQzQgZ2VuZXJhdG9yLlxyXG4gIHZhciBhcmM0ID0gbmV3IEFSQzQoa2V5KTtcclxuXHJcbiAgLy8gTWl4IHRoZSByYW5kb21uZXNzIGludG8gYWNjdW11bGF0ZWQgZW50cm9weS5cclxuICBtaXhrZXkodG9zdHJpbmcoYXJjNC5TKSwgcG9vbCk7XHJcblxyXG4gIC8vIE92ZXJyaWRlIE1hdGgucmFuZG9tXHJcblxyXG4gIC8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHJhbmRvbSBkb3VibGUgaW4gWzAsIDEpIHRoYXQgY29udGFpbnNcclxuICAvLyByYW5kb21uZXNzIGluIGV2ZXJ5IGJpdCBvZiB0aGUgbWFudGlzc2Egb2YgdGhlIElFRUUgNzU0IHZhbHVlLlxyXG5cclxuICByZXR1cm4gZnVuY3Rpb24oKSB7ICAgICAgICAgLy8gQ2xvc3VyZSB0byByZXR1cm4gYSByYW5kb20gZG91YmxlOlxyXG4gICAgdmFyIG4gPSBhcmM0LmcoY2h1bmtzKSwgICAgICAgICAgICAgLy8gU3RhcnQgd2l0aCBhIG51bWVyYXRvciBuIDwgMiBeIDQ4XHJcbiAgICAgICAgZCA9IHN0YXJ0ZGVub20sICAgICAgICAgICAgICAgICAvLyAgIGFuZCBkZW5vbWluYXRvciBkID0gMiBeIDQ4LlxyXG4gICAgICAgIHggPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhbmQgbm8gJ2V4dHJhIGxhc3QgYnl0ZScuXHJcbiAgICB3aGlsZSAobiA8IHNpZ25pZmljYW5jZSkgeyAgICAgICAgICAvLyBGaWxsIHVwIGFsbCBzaWduaWZpY2FudCBkaWdpdHMgYnlcclxuICAgICAgbiA9IChuICsgeCkgKiB3aWR0aDsgICAgICAgICAgICAgIC8vICAgc2hpZnRpbmcgbnVtZXJhdG9yIGFuZFxyXG4gICAgICBkICo9IHdpZHRoOyAgICAgICAgICAgICAgICAgICAgICAgLy8gICBkZW5vbWluYXRvciBhbmQgZ2VuZXJhdGluZyBhXHJcbiAgICAgIHggPSBhcmM0LmcoMSk7ICAgICAgICAgICAgICAgICAgICAvLyAgIG5ldyBsZWFzdC1zaWduaWZpY2FudC1ieXRlLlxyXG4gICAgfVxyXG4gICAgd2hpbGUgKG4gPj0gb3ZlcmZsb3cpIHsgICAgICAgICAgICAgLy8gVG8gYXZvaWQgcm91bmRpbmcgdXAsIGJlZm9yZSBhZGRpbmdcclxuICAgICAgbiAvPSAyOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgbGFzdCBieXRlLCBzaGlmdCBldmVyeXRoaW5nXHJcbiAgICAgIGQgLz0gMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHJpZ2h0IHVzaW5nIGludGVnZXIgTWF0aCB1bnRpbFxyXG4gICAgICB4ID4+Pj0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB3ZSBoYXZlIGV4YWN0bHkgdGhlIGRlc2lyZWQgYml0cy5cclxuICAgIH1cclxuICAgIHJldHVybiAobiArIHgpIC8gZDsgICAgICAgICAgICAgICAgIC8vIEZvcm0gdGhlIG51bWJlciB3aXRoaW4gWzAsIDEpLlxyXG4gIH07XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5yZXNldEdsb2JhbCA9IGZ1bmN0aW9uICgpIHtcclxuICBNYXRoLnJhbmRvbSA9IG9sZFJhbmRvbTtcclxufTtcclxuXHJcbi8vXHJcbi8vIEFSQzRcclxuLy9cclxuLy8gQW4gQVJDNCBpbXBsZW1lbnRhdGlvbi4gIFRoZSBjb25zdHJ1Y3RvciB0YWtlcyBhIGtleSBpbiB0aGUgZm9ybSBvZlxyXG4vLyBhbiBhcnJheSBvZiBhdCBtb3N0ICh3aWR0aCkgaW50ZWdlcnMgdGhhdCBzaG91bGQgYmUgMCA8PSB4IDwgKHdpZHRoKS5cclxuLy9cclxuLy8gVGhlIGcoY291bnQpIG1ldGhvZCByZXR1cm5zIGEgcHNldWRvcmFuZG9tIGludGVnZXIgdGhhdCBjb25jYXRlbmF0ZXNcclxuLy8gdGhlIG5leHQgKGNvdW50KSBvdXRwdXRzIGZyb20gQVJDNC4gIEl0cyByZXR1cm4gdmFsdWUgaXMgYSBudW1iZXIgeFxyXG4vLyB0aGF0IGlzIGluIHRoZSByYW5nZSAwIDw9IHggPCAod2lkdGggXiBjb3VudCkuXHJcbi8vXHJcbi8qKiBAY29uc3RydWN0b3IgKi9cclxuZnVuY3Rpb24gQVJDNChrZXkpIHtcclxuICB2YXIgdCwga2V5bGVuID0ga2V5Lmxlbmd0aCxcclxuICAgICAgbWUgPSB0aGlzLCBpID0gMCwgaiA9IG1lLmkgPSBtZS5qID0gMCwgcyA9IG1lLlMgPSBbXTtcclxuXHJcbiAgLy8gVGhlIGVtcHR5IGtleSBbXSBpcyB0cmVhdGVkIGFzIFswXS5cclxuICBpZiAoIWtleWxlbikgeyBrZXkgPSBba2V5bGVuKytdOyB9XHJcblxyXG4gIC8vIFNldCB1cCBTIHVzaW5nIHRoZSBzdGFuZGFyZCBrZXkgc2NoZWR1bGluZyBhbGdvcml0aG0uXHJcbiAgd2hpbGUgKGkgPCB3aWR0aCkge1xyXG4gICAgc1tpXSA9IGkrKztcclxuICB9XHJcbiAgZm9yIChpID0gMDsgaSA8IHdpZHRoOyBpKyspIHtcclxuICAgIHNbaV0gPSBzW2ogPSBtYXNrICYgKGogKyBrZXlbaSAlIGtleWxlbl0gKyAodCA9IHNbaV0pKV07XHJcbiAgICBzW2pdID0gdDtcclxuICB9XHJcblxyXG4gIC8vIFRoZSBcImdcIiBtZXRob2QgcmV0dXJucyB0aGUgbmV4dCAoY291bnQpIG91dHB1dHMgYXMgb25lIG51bWJlci5cclxuICAobWUuZyA9IGZ1bmN0aW9uKGNvdW50KSB7XHJcbiAgICAvLyBVc2luZyBpbnN0YW5jZSBtZW1iZXJzIGluc3RlYWQgb2YgY2xvc3VyZSBzdGF0ZSBuZWFybHkgZG91YmxlcyBzcGVlZC5cclxuICAgIHZhciB0LCByID0gMCxcclxuICAgICAgICBpID0gbWUuaSwgaiA9IG1lLmosIHMgPSBtZS5TO1xyXG4gICAgd2hpbGUgKGNvdW50LS0pIHtcclxuICAgICAgdCA9IHNbaSA9IG1hc2sgJiAoaSArIDEpXTtcclxuICAgICAgciA9IHIgKiB3aWR0aCArIHNbbWFzayAmICgoc1tpXSA9IHNbaiA9IG1hc2sgJiAoaiArIHQpXSkgKyAoc1tqXSA9IHQpKV07XHJcbiAgICB9XHJcbiAgICBtZS5pID0gaTsgbWUuaiA9IGo7XHJcbiAgICByZXR1cm4gcjtcclxuICAgIC8vIEZvciByb2J1c3QgdW5wcmVkaWN0YWJpbGl0eSBkaXNjYXJkIGFuIGluaXRpYWwgYmF0Y2ggb2YgdmFsdWVzLlxyXG4gICAgLy8gU2VlIGh0dHA6Ly93d3cucnNhLmNvbS9yc2FsYWJzL25vZGUuYXNwP2lkPTIwMDlcclxuICB9KSh3aWR0aCk7XHJcbn1cclxuXHJcbi8vXHJcbi8vIGZsYXR0ZW4oKVxyXG4vLyBDb252ZXJ0cyBhbiBvYmplY3QgdHJlZSB0byBuZXN0ZWQgYXJyYXlzIG9mIHN0cmluZ3MuXHJcbi8vXHJcbmZ1bmN0aW9uIGZsYXR0ZW4ob2JqLCBkZXB0aCkge1xyXG4gIHZhciByZXN1bHQgPSBbXSwgdHlwID0gKHR5cGVvZiBvYmopWzBdLCBwcm9wO1xyXG4gIGlmIChkZXB0aCAmJiB0eXAgPT0gJ28nKSB7XHJcbiAgICBmb3IgKHByb3AgaW4gb2JqKSB7XHJcbiAgICAgIHRyeSB7IHJlc3VsdC5wdXNoKGZsYXR0ZW4ob2JqW3Byb3BdLCBkZXB0aCAtIDEpKTsgfSBjYXRjaCAoZSkge31cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIChyZXN1bHQubGVuZ3RoID8gcmVzdWx0IDogdHlwID09ICdzJyA/IG9iaiA6IG9iaiArICdcXDAnKTtcclxufVxyXG5cclxuLy9cclxuLy8gbWl4a2V5KClcclxuLy8gTWl4ZXMgYSBzdHJpbmcgc2VlZCBpbnRvIGEga2V5IHRoYXQgaXMgYW4gYXJyYXkgb2YgaW50ZWdlcnMsIGFuZFxyXG4vLyByZXR1cm5zIGEgc2hvcnRlbmVkIHN0cmluZyBzZWVkIHRoYXQgaXMgZXF1aXZhbGVudCB0byB0aGUgcmVzdWx0IGtleS5cclxuLy9cclxuZnVuY3Rpb24gbWl4a2V5KHNlZWQsIGtleSkge1xyXG4gIHZhciBzdHJpbmdzZWVkID0gc2VlZCArICcnLCBzbWVhciwgaiA9IDA7XHJcbiAgd2hpbGUgKGogPCBzdHJpbmdzZWVkLmxlbmd0aCkge1xyXG4gICAga2V5W21hc2sgJiBqXSA9XHJcbiAgICAgIG1hc2sgJiAoKHNtZWFyIF49IGtleVttYXNrICYgal0gKiAxOSkgKyBzdHJpbmdzZWVkLmNoYXJDb2RlQXQoaisrKSk7XHJcbiAgfVxyXG4gIHJldHVybiB0b3N0cmluZyhrZXkpO1xyXG59XHJcblxyXG4vL1xyXG4vLyBhdXRvc2VlZCgpXHJcbi8vIFJldHVybnMgYW4gb2JqZWN0IGZvciBhdXRvc2VlZGluZywgdXNpbmcgd2luZG93LmNyeXB0byBpZiBhdmFpbGFibGUuXHJcbi8vXHJcbi8qKiBAcGFyYW0ge1VpbnQ4QXJyYXk9fSBzZWVkICovXHJcbmZ1bmN0aW9uIGF1dG9zZWVkKHNlZWQpIHtcclxuICB0cnkge1xyXG4gICAgR0xPQkFMLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoc2VlZCA9IG5ldyBVaW50OEFycmF5KHdpZHRoKSk7XHJcbiAgICByZXR1cm4gdG9zdHJpbmcoc2VlZCk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgcmV0dXJuIFsrbmV3IERhdGUsIEdMT0JBTCwgR0xPQkFMLm5hdmlnYXRvciAmJiBHTE9CQUwubmF2aWdhdG9yLnBsdWdpbnMsXHJcbiAgICAgICAgICAgIEdMT0JBTC5zY3JlZW4sIHRvc3RyaW5nKHBvb2wpXTtcclxuICB9XHJcbn1cclxuXHJcbi8vXHJcbi8vIHRvc3RyaW5nKClcclxuLy8gQ29udmVydHMgYW4gYXJyYXkgb2YgY2hhcmNvZGVzIHRvIGEgc3RyaW5nXHJcbi8vXHJcbmZ1bmN0aW9uIHRvc3RyaW5nKGEpIHtcclxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSgwLCBhKTtcclxufVxyXG5cclxuLy9cclxuLy8gV2hlbiBzZWVkcmFuZG9tLmpzIGlzIGxvYWRlZCwgd2UgaW1tZWRpYXRlbHkgbWl4IGEgZmV3IGJpdHNcclxuLy8gZnJvbSB0aGUgYnVpbHQtaW4gUk5HIGludG8gdGhlIGVudHJvcHkgcG9vbC4gIEJlY2F1c2Ugd2UgZG9cclxuLy8gbm90IHdhbnQgdG8gaW50ZWZlcmUgd2l0aCBkZXRlcm1pbnN0aWMgUFJORyBzdGF0ZSBsYXRlcixcclxuLy8gc2VlZHJhbmRvbSB3aWxsIG5vdCBjYWxsIE1hdGgucmFuZG9tIG9uIGl0cyBvd24gYWdhaW4gYWZ0ZXJcclxuLy8gaW5pdGlhbGl6YXRpb24uXHJcbi8vXHJcbm1peGtleShNYXRoLnJhbmRvbSgpLCBwb29sKTtcclxuIiwgIi8qXG4gKiBDb3B5cmlnaHQgMjAxMyBBSiBPJ05lYWxcbiAqIENvcHlyaWdodCAyMDE1IFRpYW5jaGVuZyBcIlRpbW90aHlcIiBHdVxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBAZmlsZVxuICpcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBGaXNoZXItWWF0ZXMgc2h1ZmZsZSBhbGdvcml0aG0gaW4gSmF2YVNjcmlwdCwgd2l0aFxuICogdGhlIHBvc3NpYmlsaXR5IG9mIHVzaW5nIGEgc2VlZCB0byBlbnN1cmUgcmVwcm9kdWNpYmlsaXR5LlxuICpcbiAqIEBtb2R1bGUga251dGgtc2h1ZmZsZS1zZWVkZWRcbiAqL1xuXG52YXIgcmFuZEdlbiA9IHJlcXVpcmUoJ3NlZWQtcmFuZG9tJylcblxuLyoqXG4gKiBTaHVmZmxlIGFuIGFycmF5IHVzaW5nIHRoZSBGaXNoZXItWWF0ZXMgc2h1ZmZsZSBhbGdvcml0aG0sIGFrYSBLbnV0aFxuICogc2h1ZmZsZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBvdmVyd3JpdGVzIHRoZSBpbml0aWFsIGFycmF5LiBBcyBhIHJlc3VsdCBpZiB5b3VcbiAqIHdvdWxkIGxpa2UgdG8ga2VlcCB0aGUgb3JpZ2luYWwgYXJyYXkgaW50YWN0LCB5b3UgaGF2ZSB0byBjb3B5IHRoZSBpbml0aWFsXG4gKiBhcnJheSB0byBhIG5ldyBhcnJheS5cbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBkZXJpdmVkIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDUwOTU0Ly5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBBbiBhcnJheSB0aGF0IGlzIHRvIGJlIHNodWZmbGVkLlxuICogQHBhcmFtIFtzZWVkPU1hdGgucmFuZG9tKCldIFNlZWQgZm9yIHRoZSBzaHVmZmxpbmcgb3BlcmF0aW9uLiBJZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc3BlY2lmaWVkIHRoZW4gYSByYW5kb20gdmFsdWUgaXMgdXNlZC5cbiAqIEByZXR1cm4ge0FycmF5fSBUaGUgcmVzdWx0aW5nIGFycmF5LlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNodWZmbGUoYXJyYXksIHNlZWQpIHtcbiAgdmFyIGN1cnJlbnRJbmRleFxuICAgICwgdGVtcG9yYXJ5VmFsdWVcbiAgICAsIHJhbmRvbUluZGV4XG4gICAgLCByYW5kXG4gIGlmIChzZWVkID09IG51bGwpIHJhbmQgPSByYW5kR2VuKClcbiAgZWxzZSAgICAgICAgICAgICAgcmFuZCA9IHJhbmRHZW4oc2VlZClcblxuICBpZiAoYXJyYXkuY29uc3RydWN0b3IgIT09IEFycmF5KSB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGlzIG5vdCBhbiBhcnJheScpXG4gIGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aFxuXG4gIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxlLi4uXG4gIHdoaWxlICgwICE9PSBjdXJyZW50SW5kZXgpIHtcbiAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnQuLi5cbiAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IocmFuZCgpICogKGN1cnJlbnRJbmRleCAtLSkpXG5cbiAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgdGVtcG9yYXJ5VmFsdWUgPSBhcnJheVtjdXJyZW50SW5kZXhdXG4gICAgYXJyYXlbY3VycmVudEluZGV4XSA9IGFycmF5W3JhbmRvbUluZGV4XVxuICAgIGFycmF5W3JhbmRvbUluZGV4XSA9IHRlbXBvcmFyeVZhbHVlXG4gIH1cblxuICByZXR1cm4gYXJyYXlcbn1cbiIsICJleHBvcnQgeyBMb2NhbEFwcCB9IGZyb20gXCIuL2xvY2FsLWFwcFwiO1xuIiwgImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnLi9pbmRleC5qcydcblxuZXhwb3J0IHsgRXZlbnRFbWl0dGVyIH1cbmV4cG9ydCBkZWZhdWx0IEV2ZW50RW1pdHRlclxuIiwgImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSBcImV2ZW50ZW1pdHRlcjNcIjtcbmltcG9ydCBzaHVmZmxlIGZyb20gXCJrbnV0aC1zaHVmZmxlLXNlZWRlZFwiO1xuaW1wb3J0IHR5cGUgeyBDbGllbnRNZXNzYWdlT2JqZWN0IH0gZnJvbSBcIi4vY2xpZW50XCI7XG5pbXBvcnQgdHlwZSB7IFNlcnZlck1lc3NhZ2VPYmplY3QgfSBmcm9tIFwiLi9zZXJ2ZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRFbmdpbmVPcHRpb25zIHtcbiAgbXNQZXJUaWNrOiBudW1iZXI7XG4gIHdpbmRQaGk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRFbmdpbmVTdGF0ZSBleHRlbmRzIENsaWVudE1lc3NhZ2VPYmplY3Qge1xuICBjbGllbnRDb3VudDogbnVtYmVyO1xuICByZWFkb25seSB0b3RhbFdpbmRGb3JjZTogeyB4OiBudW1iZXI7IHo6IG51bWJlciB9O1xuICByZWFkb25seSBjYW5kbGVzOiBDbGllbnRFbmdpbmVTdGF0ZS5DYW5kbGVbXTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDbGllbnRFbmdpbmVTdGF0ZSB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2FuZGxlIHtcbiAgICB4OiBudW1iZXI7XG4gICAgejogbnVtYmVyO1xuICAgIGlzTGl0OiBib29sZWFuO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDbGllbnRFbmdpbmUgZXh0ZW5kcyBFdmVudEVtaXR0ZXI8e1xuICBzdGFydDogW107XG4gIHN0b3A6IFtdO1xuICBlcnJvcjogW2FueV07XG4gIHRpY2s6IFtSZWFkb25seTxDbGllbnRFbmdpbmVTdGF0ZT5dO1xufT4ge1xuICBwcml2YXRlIHJ1bm5pbmcgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXN0VGlja1RpbWUgPSAwO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgb3B0aW9uczogQ2xpZW50RW5naW5lT3B0aW9ucztcblxuICBwcml2YXRlIHJlYWRvbmx5IHN0YXRlOiBDbGllbnRFbmdpbmVTdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDbGllbnRFbmdpbmVPcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBzdHJ1Y3R1cmVkQ2xvbmUob3B0aW9ucyk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHdpbmRGb3JjZTogMCxcbiAgICAgIGNsaWVudENvdW50OiAwLFxuICAgICAgdG90YWxXaW5kRm9yY2U6IHsgeDogMCwgejogMCB9LFxuICAgICAgY2FuZGxlczogW10sXG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZVNlcnZlclN0YXRlKG1zZzogUmVhZG9ubHk8U2VydmVyTWVzc2FnZU9iamVjdD4pOiB2b2lkIHtcbiAgICBjb25zdCB7IGxvZzIsIGZsb29yLCBjZWlsLCBzaW4sIGNvcywgUEkgfSA9IE1hdGg7XG5cbiAgICB0aGlzLnN0YXRlLmNsaWVudENvdW50ID0gbXNnLmNsaWVudENvdW50O1xuXG4gICAgdGhpcy5zdGF0ZS50b3RhbFdpbmRGb3JjZS54ID0gbXNnLnRvdGFsV2luZEZvcmNlICogY29zKHRoaXMub3B0aW9ucy53aW5kUGhpKTtcbiAgICB0aGlzLnN0YXRlLnRvdGFsV2luZEZvcmNlLnogPSBtc2cudG90YWxXaW5kRm9yY2UgKiBzaW4odGhpcy5vcHRpb25zLndpbmRQaGkpO1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuY2FuZGxlcy5sZW5ndGggIT09IG1zZy5jYW5kbGVDb3VudCkge1xuICAgICAgdGhpcy5zdGF0ZS5jYW5kbGVzLnNwbGljZSgwLCB0aGlzLnN0YXRlLmNhbmRsZXMubGVuZ3RoKTtcblxuICAgICAgaWYgKG1zZy5jYW5kbGVDb3VudCAhPT0gMCkge1xuICAgICAgICBjb25zdCBuID0gbXNnLmNhbmRsZUNvdW50O1xuICAgICAgICBjb25zdCBuYyA9IGNlaWwobG9nMihuKSk7XG4gICAgICAgIGNvbnN0IGRyID0gMC45IC8gbmM7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBpYyA9IGZsb29yKGxvZzIoaSArIDEpKTtcbiAgICAgICAgICBjb25zdCBucGMgPSAyICoqIChpYyArIDEpIDw9IG4gPyAyICoqIGljIDogbiAtIDIgKiogaWMgKyAxO1xuICAgICAgICAgIGNvbnN0IHIgPSBpYyAqIGRyO1xuICAgICAgICAgIGNvbnN0IGRwaGkgPSAoMiAqIFBJKSAvIG5wYztcbiAgICAgICAgICBjb25zdCBpcGMgPSBpIC0gKDIgKiogaWMgLSAxKTtcbiAgICAgICAgICBjb25zdCBwaGkgPSBkcGhpICogaXBjICsgKFBJICogaWMpIC8gbmM7XG5cbiAgICAgICAgICB0aGlzLnN0YXRlLmNhbmRsZXMucHVzaCh7XG4gICAgICAgICAgICB4OiByICogY29zKHBoaSksXG4gICAgICAgICAgICB6OiByICogc2luKHBoaSksXG4gICAgICAgICAgICBpc0xpdDogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzaHVmZmxlKHRoaXMuc3RhdGUuY2FuZGxlcywgbXNnLmNhbmRsZUNvdW50KTtcbiAgICB9XG5cbiAgICBsZXQgYmxvd25PdXRDYW5kbGVDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBjYW5kbGUgb2YgdGhpcy5zdGF0ZS5jYW5kbGVzKSB7XG4gICAgICBpZiAoIWNhbmRsZS5pc0xpdCkgYmxvd25PdXRDYW5kbGVDb3VudCArPSAxO1xuICAgIH1cblxuICAgIHdoaWxlIChibG93bk91dENhbmRsZUNvdW50ID4gbXNnLmJsb3duT3V0Q2FuZGxlQ291bnQpIHtcbiAgICAgIGJsb3duT3V0Q2FuZGxlQ291bnQgLT0gMTtcbiAgICAgIHRoaXMuc3RhdGUuY2FuZGxlc1tibG93bk91dENhbmRsZUNvdW50XS5pc0xpdCA9IHRydWU7XG4gICAgfVxuXG4gICAgd2hpbGUgKGJsb3duT3V0Q2FuZGxlQ291bnQgPCBtc2cuYmxvd25PdXRDYW5kbGVDb3VudCkge1xuICAgICAgdGhpcy5zdGF0ZS5jYW5kbGVzW2Jsb3duT3V0Q2FuZGxlQ291bnRdLmlzTGl0ID0gZmFsc2U7XG4gICAgICBibG93bk91dENhbmRsZUNvdW50ICs9IDE7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQ2xpZW50U3RhdGUobXNnOiBSZWFkb25seTxDbGllbnRNZXNzYWdlT2JqZWN0Pik6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUud2luZEZvcmNlID0gbXNnLndpbmRGb3JjZTtcbiAgfVxuXG4gIHByaXZhdGUgdGljayhkZWx0YU1zOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXQoXCJ0aWNrXCIsIHRoaXMuc3RhdGUpO1xuICB9XG5cbiAgc3RhcnQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucnVubmluZykgcmV0dXJuO1xuICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgdGhpcy5sYXN0VGlja1RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgIGNvbnN0IHJ1biA9ICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICBjb25zdCBkZWx0YU1zID0gbm93IC0gdGhpcy5sYXN0VGlja1RpbWU7XG5cbiAgICAgICAgdGhpcy50aWNrKGRlbHRhTXMpO1xuXG4gICAgICAgIHRoaXMubGFzdFRpY2tUaW1lID0gbm93O1xuXG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHJ1biwgdGhpcy5vcHRpb25zLm1zUGVyVGljayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwic3RvcFwiKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZW1pdChcInN0YXJ0XCIpO1xuICAgICAgcnVuKCk7XG4gICAgfSwgdGhpcy5vcHRpb25zLm1zUGVyVGljayk7XG4gIH1cblxuICBzdG9wKCk6IHZvaWQge1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICB9XG59XG4iLCAiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tIFwiZXZlbnRlbWl0dGVyM1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vaXNlQW5hbHlzZXJPcHRpb25zIHtcbiAgYnVmZmVyTXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIE5vaXNlQW5hbHlzZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXI8e1xuICBvcGVuOiBbXTtcbiAgY2xvc2U6IFtdO1xuICBlcnJvcjogW2FueV07XG59PiB7XG4gIHByaXZhdGUgY3R4OiBBdWRpb0NvbnRleHQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtZWRpYVN0cmVhbVNvdXJjZTogTWVkaWFTdHJlYW1BdWRpb1NvdXJjZU5vZGUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhbmFseXNlcjogQW5hbHlzZXJOb2RlIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBkYXRhITogRmxvYXQzMkFycmF5O1xuXG4gIGNvbnN0cnVjdG9yKHsgYnVmZmVyTXMgfTogTm9pc2VBbmFseXNlck9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmdldFVzZXJNZWRpYSh7IGF1ZGlvOiB7IHNhbXBsZVJhdGU6IDgwMDAsIG5vaXNlU3VwcHJlc3Npb246IGZhbHNlIH0gfSlcbiAgICAgIC50aGVuKChtZWRpYVN0cmVhbSkgPT4ge1xuICAgICAgICB0aGlzLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoe1xuICAgICAgICAgIHNhbXBsZVJhdGU6IG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZ2V0U2V0dGluZ3MoKS5zYW1wbGVSYXRlISxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoTWF0aC5jZWlsKHRoaXMuY3R4LnNhbXBsZVJhdGUgKiAoYnVmZmVyTXMgLyAxMDAwKSkpO1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtU291cmNlID0gdGhpcy5jdHguY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobWVkaWFTdHJlYW0pO1xuICAgICAgICB0aGlzLmFuYWx5c2VyID0gdGhpcy5jdHguY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0KHRoaXMuYW5hbHlzZXIpO1xuICAgICAgICB0aGlzLmVtaXQoXCJvcGVuXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuYW5hbHlzZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLm1lZGlhU3RyZWFtU291cmNlPy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5jdHhcbiAgICAgID8uY2xvc2UoKVxuICAgICAgLnRoZW4oKCkgPT4gdGhpcy5lbWl0KFwiY2xvc2VcIikpXG4gICAgICAuY2F0Y2goKGVycikgPT4gdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKSk7XG4gIH1cblxuICBnZXROb2lzZUxldmVsKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmRhdGEgfHwgIXRoaXMuYW5hbHlzZXIpIHJldHVybiAwO1xuICAgIHRoaXMuYW5hbHlzZXIuZ2V0RmxvYXRUaW1lRG9tYWluRGF0YSh0aGlzLmRhdGEpO1xuXG4gICAgbGV0IGwgPSAwO1xuICAgIGxldCBtaW4gPSB0aGlzLmRhdGFbMF07XG4gICAgbGV0IG1heCA9IHRoaXMuZGF0YVswXTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsICs9ICh0aGlzLmRhdGFbaV0gLSB0aGlzLmRhdGFbaSAtIDFdKSAqKiAyO1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCB0aGlzLmRhdGFbaV0pO1xuICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCB0aGlzLmRhdGFbaV0pO1xuICAgIH1cblxuICAgIGNvbnN0IGEgPSBNYXRoLm1heChtYXggLSBtaW4sIDAuMSk7XG4gICAgY29uc3QgbiA9IHRoaXMuZGF0YS5sZW5ndGg7XG5cbiAgICByZXR1cm4gbCAvIChhICogbik7XG4gIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IENsaWVudEVuZ2luZVN0YXRlIH0gZnJvbSBcIi4vY2xpZW50LWVuZ2luZVwiO1xuXG4vLyBiYXNlZCBvbiBodHRwczovL2NvbW1vbnMud2lraW1lZGlhLm9yZy93aWtpL0ZpbGU6NTU3LWJpcnRoZGF5LWNha2UtMS5zdmdcbi8vIGF1dGhvcjogQ3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbiA0LjAgSW50ZXJuYXRpb25hbFxuLy8gbGljZW5zZWQgdW5kZXIgQ3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbiA0LjAgSW50ZXJuYXRpb25hbFxuaW1wb3J0IGNha2VTdmdEYXRhVXJsIGZyb20gXCIuL2Nha2Uuc3ZnXCI7XG5pbXBvcnQgY2FuZGxlTGl0U3ZnRGF0YVVybCBmcm9tIFwiLi9jYW5kbGUtbGl0LnN2Z1wiO1xuaW1wb3J0IGNhbmRsZUJsb3duT3V0U3ZnRGF0YVVybCBmcm9tIFwiLi9jYW5kbGUtYmxvd24tb3V0LnN2Z1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlcmVyT3B0aW9ucyB7XG4gIGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgY2FrZVN2ZzogSFRNTEltYWdlRWxlbWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBjYW5kbGVTdmdUZW1wbGF0ZTogSFRNTEltYWdlRWxlbWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBjYW5kbGVTdmdzOiBIVE1MSW1hZ2VFbGVtZW50W10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcih7IGNvbnRhaW5lckVsZW1lbnQ6IGNvbnRhaW5lciB9OiBSZW5kZXJlck9wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBjb250YWluZXI7XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udGFpbmVyRWxlbWVudC5zdHlsZSwge1xuICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgIHdpZHRoOiBcIjEwMHZtaW5cIixcbiAgICAgIGhlaWdodDogXCIxMDB2bWluXCIsXG4gICAgICB0b3A6IFwiMFwiLFxuICAgICAgbGVmdDogXCIwXCIsXG4gICAgICBib3R0b206IFwiMFwiLFxuICAgICAgcmlnaHQ6IFwiMFwiLFxuICAgICAgbWFyZ2luOiBcImF1dG9cIixcbiAgICB9KTtcblxuICAgIHRoaXMuY2FrZVN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuY2FrZVN2Zywge1xuICAgICAgc3JjOiBjYWtlU3ZnRGF0YVVybCxcbiAgICB9KTtcblxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5jYWtlU3ZnLnN0eWxlLCB7XG4gICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgIH0pO1xuXG4gICAgdGhpcy5jYW5kbGVTdmdUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuY2FuZGxlU3ZnVGVtcGxhdGUsIHtcbiAgICAgIHNyYzogY2FuZGxlTGl0U3ZnRGF0YVVybCxcbiAgICB9KTtcblxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5jYW5kbGVTdmdUZW1wbGF0ZS5zdHlsZSwge1xuICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgIHdpZHRoOiBcImF1dG9cIixcbiAgICAgIGhlaWdodDogXCIxNiVcIixcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyRWxlbWVudC5yZXBsYWNlQ2hpbGRyZW4odGhpcy5jYWtlU3ZnKTtcbiAgfVxuXG4gIHVwZGF0ZUVuZ2luZVN0YXRlKHN0YXRlOiBDbGllbnRFbmdpbmVTdGF0ZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNhbmRsZVN2Z3MubGVuZ3RoICE9PSBzdGF0ZS5jYW5kbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5jb250YWluZXJFbGVtZW50LnJlcGxhY2VDaGlsZHJlbih0aGlzLmNha2VTdmcpO1xuICAgICAgdGhpcy5jYW5kbGVTdmdzLnNwbGljZSgwLCB0aGlzLmNhbmRsZVN2Z3MubGVuZ3RoKTtcblxuICAgICAgZm9yIChjb25zdCBjYW5kbGUgb2Ygc3RhdGUuY2FuZGxlcykge1xuICAgICAgICBjb25zdCBjYW5kbGVTdmcgPSB0aGlzLmNhbmRsZVN2Z1RlbXBsYXRlLmNsb25lTm9kZSgpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAgICAgY2FuZGxlU3ZnLmRhdGFzZXQuaXNMaXQgPSBjYW5kbGUuaXNMaXQgPyBcInRydWVcIiA6IFwiXCI7XG4gICAgICAgIGNhbmRsZVN2Zy5zcmMgPSBjYW5kbGUuaXNMaXQgPyBjYW5kbGVMaXRTdmdEYXRhVXJsIDogY2FuZGxlQmxvd25PdXRTdmdEYXRhVXJsO1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24oY2FuZGxlU3ZnLnN0eWxlLCB7XG4gICAgICAgICAgbGVmdDogYCR7NDQgKyA0OCAqIGNhbmRsZS54fSVgLFxuICAgICAgICAgIHRvcDogYCR7MzAgKyAxNCAqIGNhbmRsZS56fSVgLFxuICAgICAgICAgIHpJbmRleDogTWF0aC5yb3VuZCgxMDAwICogKDEgKyBjYW5kbGUueikpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoY2FuZGxlU3ZnKTtcbiAgICAgICAgdGhpcy5jYW5kbGVTdmdzLnB1c2goY2FuZGxlU3ZnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhbmRsZVN2Z3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuZGxlU3Znc1tpXS5kYXRhc2V0LmlzTGl0ICYmICFzdGF0ZS5jYW5kbGVzW2ldLmlzTGl0KSB7XG4gICAgICAgICAgdGhpcy5jYW5kbGVTdmdzW2ldLnNyYyA9IGNhbmRsZUJsb3duT3V0U3ZnRGF0YVVybDtcbiAgICAgICAgICB0aGlzLmNhbmRsZVN2Z3NbaV0uZGF0YXNldC5pc0xpdCA9IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuY2FuZGxlU3Znc1tpXS5kYXRhc2V0LmlzTGl0ICYmIHN0YXRlLmNhbmRsZXNbaV0uaXNMaXQpIHtcbiAgICAgICAgICB0aGlzLmNhbmRsZVN2Z3NbaV0uc3JjID0gY2FuZGxlTGl0U3ZnRGF0YVVybDtcbiAgICAgICAgICB0aGlzLmNhbmRsZVN2Z3NbaV0uZGF0YXNldC5pc0xpdCA9IFwidHJ1ZVwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tIFwiZXZlbnRlbWl0dGVyM1wiO1xuaW1wb3J0IHR5cGUgeyBTZXJ2ZXJNZXNzYWdlT2JqZWN0IH0gZnJvbSBcIi4vc2VydmVyXCI7XG5pbXBvcnQgdHlwZSB7IENsaWVudE1lc3NhZ2VPYmplY3QgfSBmcm9tIFwiLi9jbGllbnRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2ZXJFbmdpbmVPcHRpb25zIHtcbiAgbXNQZXJUaWNrOiBudW1iZXI7XG4gIGNhbmRsZUNvdW50OiBudW1iZXI7XG4gIHRhcmdldFdpbmRGb3JjZVBlckNsaWVudDogbnVtYmVyO1xuICBmaXJzdENhbmRsZVdpbmRGb3JjZUZhY3RvcjogbnVtYmVyO1xuICBjYW5kbGVMaWZldGltZU1zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmVyRW5naW5lU3RhdGUgZXh0ZW5kcyBTZXJ2ZXJNZXNzYWdlT2JqZWN0IHtcbiAgdGFyZ2V0V2luZEZvcmNlOiBudW1iZXI7XG4gIG1zQXRUYXJnZXRXaW5kRm9yY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFNlcnZlckVuZ2luZSBleHRlbmRzIEV2ZW50RW1pdHRlcjx7XG4gIGVycm9yOiBbYW55XTtcbiAgc3RhcnQ6IFtdO1xuICBzdG9wOiBbXTtcbiAgcmVzZXQ6IFtdO1xuICB0aWNrOiBbUmVhZG9ubHk8U2VydmVyRW5naW5lU3RhdGU+XTtcbn0+IHtcbiAgcHJpdmF0ZSBydW5uaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgbGFzdFRpY2tUaW1lID0gMDtcblxuICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IFNlcnZlckVuZ2luZU9wdGlvbnM7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBzdGF0ZTogU2VydmVyRW5naW5lU3RhdGU7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2xpZW50U3RhdGVzID0gbmV3IE1hcDx1bmtub3duLCBDbGllbnRNZXNzYWdlT2JqZWN0PigpO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFNlcnZlckVuZ2luZU9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgb3B0aW9ucyA9IHN0cnVjdHVyZWRDbG9uZShvcHRpb25zKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNsaWVudENvdW50OiAwLFxuICAgICAgY2FuZGxlQ291bnQ6IG9wdGlvbnMuY2FuZGxlQ291bnQsXG4gICAgICBibG93bk91dENhbmRsZUNvdW50OiAwLFxuICAgICAgdG90YWxXaW5kRm9yY2U6IDAsXG4gICAgICB0YXJnZXRXaW5kRm9yY2U6IDAsXG4gICAgICBtc0F0VGFyZ2V0V2luZEZvcmNlOiAwLFxuICAgIH07XG4gIH1cblxuICBhZGRDbGllbnQoY2xpZW50SWQ6IHVua25vd24pOiB2b2lkIHtcbiAgICB0aGlzLmNsaWVudFN0YXRlcy5zZXQoY2xpZW50SWQsIHsgd2luZEZvcmNlOiAwIH0pO1xuICAgIHRoaXMuc3RhdGUuY2xpZW50Q291bnQgPSB0aGlzLmNsaWVudFN0YXRlcy5zaXplO1xuICAgIHRoaXMuc3RhdGUudGFyZ2V0V2luZEZvcmNlID0gdGhpcy5zdGF0ZS5jbGllbnRDb3VudCAqIHRoaXMub3B0aW9ucy50YXJnZXRXaW5kRm9yY2VQZXJDbGllbnQ7XG4gIH1cblxuICByZW1vdmVDbGllbnQoY2xpZW50SWQ6IHVua25vd24pOiB2b2lkIHtcbiAgICB0aGlzLmNsaWVudFN0YXRlcy5kZWxldGUoY2xpZW50SWQpO1xuICAgIHRoaXMuc3RhdGUuY2xpZW50Q291bnQgPSB0aGlzLmNsaWVudFN0YXRlcy5zaXplO1xuICAgIHRoaXMuc3RhdGUudGFyZ2V0V2luZEZvcmNlID0gdGhpcy5zdGF0ZS5jbGllbnRDb3VudCAqIHRoaXMub3B0aW9ucy50YXJnZXRXaW5kRm9yY2VQZXJDbGllbnQ7XG4gIH1cblxuICB1cGRhdGVDbGllbnRTdGF0ZShjbGllbnRJZDogdW5rbm93biwgY2xpZW50U3RhdGU6IENsaWVudE1lc3NhZ2VPYmplY3QpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWVudFN0YXRlcy5zZXQoY2xpZW50SWQsIGNsaWVudFN0YXRlKTtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuYmxvd25PdXRDYW5kbGVDb3VudCA9IDA7XG4gICAgdGhpcy5zdGF0ZS5tc0F0VGFyZ2V0V2luZEZvcmNlID0gMDtcbiAgICB0aGlzLmVtaXQoXCJyZXNldFwiKTtcbiAgfVxuXG4gIHByaXZhdGUgdGljayhkZWx0YU1zOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB7IHN0YXRlLCBjbGllbnRTdGF0ZXMsIG9wdGlvbnMgfSA9IHRoaXM7XG5cbiAgICBzdGF0ZS50b3RhbFdpbmRGb3JjZSA9IDA7XG4gICAgZm9yIChjb25zdCBjbGllbnRTdGF0ZSBvZiBjbGllbnRTdGF0ZXMudmFsdWVzKCkpIHN0YXRlLnRvdGFsV2luZEZvcmNlICs9IGNsaWVudFN0YXRlLndpbmRGb3JjZTtcblxuICAgIGlmIChzdGF0ZS50b3RhbFdpbmRGb3JjZSA9PT0gMCkge1xuICAgICAgc3RhdGUubXNBdFRhcmdldFdpbmRGb3JjZSA9IDA7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHN0YXRlLmJsb3duT3V0Q2FuZGxlQ291bnQgPT09IDAgJiZcbiAgICAgIHN0YXRlLnRvdGFsV2luZEZvcmNlIDwgc3RhdGUudGFyZ2V0V2luZEZvcmNlICogb3B0aW9ucy5maXJzdENhbmRsZVdpbmRGb3JjZUZhY3RvclxuICAgICkge1xuICAgICAgc3RhdGUubXNBdFRhcmdldFdpbmRGb3JjZSA9IDA7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS50b3RhbFdpbmRGb3JjZSA8IHN0YXRlLnRhcmdldFdpbmRGb3JjZSkge1xuICAgICAgc3RhdGUubXNBdFRhcmdldFdpbmRGb3JjZSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLm1zQXRUYXJnZXRXaW5kRm9yY2UgKz0gZGVsdGFNcztcblxuICAgICAgd2hpbGUgKHN0YXRlLm1zQXRUYXJnZXRXaW5kRm9yY2UgPj0gb3B0aW9ucy5jYW5kbGVMaWZldGltZU1zKSB7XG4gICAgICAgIHN0YXRlLm1zQXRUYXJnZXRXaW5kRm9yY2UgLT0gb3B0aW9ucy5jYW5kbGVMaWZldGltZU1zO1xuICAgICAgICBpZiAoc3RhdGUuYmxvd25PdXRDYW5kbGVDb3VudCA8IHN0YXRlLmNhbmRsZUNvdW50KSBzdGF0ZS5ibG93bk91dENhbmRsZUNvdW50ICs9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KFwidGlja1wiLCB0aGlzLnN0YXRlKTtcbiAgfVxuXG4gIHN0YXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnJ1bm5pbmcpIHJldHVybjtcbiAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgIHRoaXMubGFzdFRpY2tUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICBjb25zdCBydW4gPSAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgY29uc3QgZGVsdGFNcyA9IG5vdyAtIHRoaXMubGFzdFRpY2tUaW1lO1xuXG4gICAgICAgIHRoaXMudGljayhkZWx0YU1zKTtcblxuICAgICAgICB0aGlzLmxhc3RUaWNrVGltZSA9IG5vdztcblxuICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XG4gICAgICAgICAgc2V0VGltZW91dChydW4sIHRoaXMub3B0aW9ucy5tc1BlclRpY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZW1pdChcInN0b3BcIik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoXCJzdGFydFwiKTtcbiAgICAgIHJ1bigpO1xuICAgIH0sIHRoaXMub3B0aW9ucy5tc1BlclRpY2spO1xuICB9XG5cbiAgc3RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgfVxufVxuIiwgImltcG9ydCB7IENsaWVudEVuZ2luZSwgQ2xpZW50RW5naW5lT3B0aW9ucyB9IGZyb20gXCIuL2NsaWVudC1lbmdpbmVcIjtcbmltcG9ydCB7IE5vaXNlQW5hbHlzZXIsIE5vaXNlQW5hbHlzZXJPcHRpb25zIH0gZnJvbSBcIi4vbm9pc2UtYW5hbHlzZXJcIjtcbmltcG9ydCB7IFJlbmRlcmVyLCBSZW5kZXJlck9wdGlvbnMgfSBmcm9tIFwiLi9yZW5kZXJlclwiO1xuaW1wb3J0IHsgU2VydmVyRW5naW5lLCBTZXJ2ZXJFbmdpbmVPcHRpb25zIH0gZnJvbSBcIi4vc2VydmVyLWVuZ2luZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvY2FsQXBwT3B0aW9ucyB7XG4gIHNlcnZlckVuZ2luZTogU2VydmVyRW5naW5lT3B0aW9ucztcbiAgY2xpZW50RW5naW5lOiBDbGllbnRFbmdpbmVPcHRpb25zO1xuICBub2lzZUFuYWx5c2VyOiBOb2lzZUFuYWx5c2VyT3B0aW9ucztcbiAgcmVuZGVyZXI6IFJlbmRlcmVyT3B0aW9ucztcbn1cblxuZXhwb3J0IGNsYXNzIExvY2FsQXBwIHtcbiAgcHJpdmF0ZSBzZXJ2ZXJFbmdpbmU6IFNlcnZlckVuZ2luZTtcbiAgcHJpdmF0ZSBjbGllbnRFbmdpbmU6IENsaWVudEVuZ2luZTtcbiAgcHJpdmF0ZSBub2lzZUFuYWx5c2VyOiBOb2lzZUFuYWx5c2VyO1xuICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBMb2NhbEFwcE9wdGlvbnMpIHtcbiAgICB0aGlzLnNlcnZlckVuZ2luZSA9IG5ldyBTZXJ2ZXJFbmdpbmUob3B0aW9ucy5zZXJ2ZXJFbmdpbmUpO1xuICAgIHRoaXMuc2VydmVyRW5naW5lLm9uKFwic3RhcnRcIiwgKCkgPT4gY29uc29sZS5sb2coXCJzZXJ2ZXIgZW5naW5lIHN0YXJ0ZWRcIikpO1xuICAgIHRoaXMuc2VydmVyRW5naW5lLm9uKFwic3RvcFwiLCAoKSA9PiBjb25zb2xlLmxvZyhcInNlcnZlciBlbmdpbmUgc3RvcHBlZFwiKSk7XG4gICAgdGhpcy5zZXJ2ZXJFbmdpbmUub24oXCJlcnJvclwiLCAoZSkgPT4gY29uc29sZS5lcnJvcihcInNlcnZlciBlbmdpbmUgZXJyb3JcIiwgZSkpO1xuXG4gICAgdGhpcy5jbGllbnRFbmdpbmUgPSBuZXcgQ2xpZW50RW5naW5lKG9wdGlvbnMuY2xpZW50RW5naW5lKTtcbiAgICB0aGlzLmNsaWVudEVuZ2luZS5vbihcInN0YXJ0XCIsICgpID0+IGNvbnNvbGUubG9nKFwiY2xpZW50IGVuZ2luZSBzdGFydGVkXCIpKTtcbiAgICB0aGlzLmNsaWVudEVuZ2luZS5vbihcInN0b3BcIiwgKCkgPT4gY29uc29sZS5sb2coXCJjbGllbnQgZW5naW5lIHN0b3BwZWRcIikpO1xuICAgIHRoaXMuY2xpZW50RW5naW5lLm9uKFwiZXJyb3JcIiwgKGUpID0+IGNvbnNvbGUuZXJyb3IoXCJjbGllbnQgZW5naW5lIGVycm9yXCIsIGUpKTtcblxuICAgIHRoaXMubm9pc2VBbmFseXNlciA9IG5ldyBOb2lzZUFuYWx5c2VyKG9wdGlvbnMubm9pc2VBbmFseXNlcik7XG4gICAgdGhpcy5ub2lzZUFuYWx5c2VyLm9uKFwib3BlblwiLCAoKSA9PiBjb25zb2xlLmxvZyhcIm5vaXNlIGFuYWx5c2VyIGluaXRpYWxpemVkXCIpKTtcbiAgICB0aGlzLm5vaXNlQW5hbHlzZXIub24oXCJjbG9zZVwiLCAoKSA9PiBjb25zb2xlLmxvZyhcIm5vaXNlIGFuYWx5c2VyIGNsb3NlZFwiKSk7XG4gICAgdGhpcy5ub2lzZUFuYWx5c2VyLm9uKFwiZXJyb3JcIiwgKGUpID0+IGNvbnNvbGUuZXJyb3IoXCJub2lzZSBhbmFseXNlciBlcnJvclwiLCBlKSk7XG5cbiAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKG9wdGlvbnMucmVuZGVyZXIpO1xuXG4gICAgdGhpcy5zZXJ2ZXJFbmdpbmUub24oXCJ0aWNrXCIsIChzdGF0ZSkgPT4ge1xuICAgICAgdGhpcy5jbGllbnRFbmdpbmUudXBkYXRlU2VydmVyU3RhdGUoc3RhdGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jbGllbnRFbmdpbmUub24oXCJ0aWNrXCIsIChzdGF0ZSkgPT4ge1xuICAgICAgdGhpcy5zZXJ2ZXJFbmdpbmUudXBkYXRlQ2xpZW50U3RhdGUobnVsbCwgc3RhdGUpO1xuICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVFbmdpbmVTdGF0ZShzdGF0ZSk7XG4gICAgICBjb25zdCB3aW5kRm9yY2UgPSB0aGlzLm5vaXNlQW5hbHlzZXIuZ2V0Tm9pc2VMZXZlbCgpO1xuICAgICAgY29uc29sZS5kZWJ1Zyh3aW5kRm9yY2UudG9GaXhlZCgzKSk7XG4gICAgICB0aGlzLmNsaWVudEVuZ2luZS51cGRhdGVDbGllbnRTdGF0ZSh7IHdpbmRGb3JjZSB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuc2VydmVyRW5naW5lLnN0YXJ0KCk7XG4gICAgdGhpcy5jbGllbnRFbmdpbmUuc3RhcnQoKTtcblxuICAgIHRoaXMuc2VydmVyRW5naW5lLmFkZENsaWVudChudWxsKTtcbiAgfVxuXG4gIHN0b3AoKTogdm9pZCB7XG4gICAgdGhpcy5zZXJ2ZXJFbmdpbmUucmVtb3ZlQ2xpZW50KG51bGwpO1xuICAgIHRoaXMuc2VydmVyRW5naW5lLnN0b3AoKTtcbiAgICB0aGlzLmNsaWVudEVuZ2luZS5zdG9wKCk7XG4gICAgdGhpcy5ub2lzZUFuYWx5c2VyLmNsb3NlKCk7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICJ1cEJBQUEsSUFBQUEsRUFBQUMsRUFBQSxDQUFBQyxHQUFBQyxJQUFBLGNBRUEsSUFBSUMsR0FBTSxPQUFPLFVBQVUsZUFDdkJDLEVBQVMsSUFTYixTQUFTQyxHQUFTLENBQUMsQ0FTZixPQUFPLFNBQ1RBLEVBQU8sVUFBWSxPQUFPLE9BQU8sSUFBSSxFQU1oQyxJQUFJQSxFQUFPLEVBQUUsWUFBV0QsRUFBUyxLQVl4QyxTQUFTRSxHQUFHQyxFQUFJQyxFQUFTQyxFQUFNLENBQzdCLEtBQUssR0FBS0YsRUFDVixLQUFLLFFBQVVDLEVBQ2YsS0FBSyxLQUFPQyxHQUFRLEVBQ3RCLENBYUEsU0FBU0MsRUFBWUMsRUFBU0MsRUFBT0wsRUFBSUMsRUFBU0MsRUFBTSxDQUN0RCxHQUFJLE9BQU9GLEdBQU8sV0FDaEIsTUFBTSxJQUFJLFVBQVUsaUNBQWlDLEVBR3ZELElBQUlNLEVBQVcsSUFBSVAsR0FBR0MsRUFBSUMsR0FBV0csRUFBU0YsQ0FBSSxFQUM5Q0ssRUFB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QUFZLEtBQUssY0FBYyxjQUFjLEVBQ25ELFFBQVEsTUFBTUEsRUFBVSxRQUFRLENBQUMsQ0FBQyxFQUNsQyxLQUFLLGFBQWEsa0JBQWtCLENBQUUsVUFBQUEsQ0FBVSxDQUFDLENBQ25ELENBQUMsRUFFRCxLQUFLLGFBQWEsTUFBTSxFQUN4QixLQUFLLGFBQWEsTUFBTSxFQUV4QixLQUFLLGFBQWEsVUFBVSxJQUFJLENBQ2xDLENBRUEsTUFBYSxDQUNYLEtBQUssYUFBYSxhQUFhLElBQUksRUFDbkMsS0FBSyxhQUFhLEtBQUssRUFDdkIsS0FBSyxhQUFhLEtBQUssRUFDdkIsS0FBSyxjQUFjLE1BQU0sQ0FDM0IsQ0FDRiIsCiAgIm5hbWVzIjogWyJyZXF1aXJlX2V2ZW50ZW1pdHRlcjMiLCAiX19jb21tb25KU01pbiIsICJleHBvcnRzIiwgIm1vZHVsZSIsICJoYXMiLCAicHJlZml4IiwgIkV2ZW50cyIsICJFRSIsICJmbiIsICJjb250ZXh0IiwgIm9uY2UiLCAiYWRkTGlzdGVuZXIiLCAiZW1pdHRlciIsICJldmVudCIsICJsaXN0ZW5lciIsICJldnQiLCAiY2xlYXJFdmVudCIsICJFdmVudEVtaXR0ZXIiLCAibmFtZXMiLCAiZXZlbnRzIiwgIm5hbWUiLCAiaGFuZGxlcnMiLCAiaSIsICJlZSIsICJsaXN0ZW5lcnMiLCAiYTEiLCAiYTIiLCAiYTMiLCAiYTQiLCAiYTUiLCAibGVuIiwgImFyZ3MiLCAibGVuZ3RoIiwgImoiLCAicmVxdWlyZV9zZWVkX3JhbmRvbSIsICJfX2NvbW1vbkpTTWluIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgIndpZHRoIiwgImNodW5rcyIsICJkaWdpdHMiLCAicG9vbCIsICJHTE9CQUwiLCAic3RhcnRkZW5vbSIsICJzaWduaWZpY2FuY2UiLCAib3ZlcmZsb3ciLCAibWFzayIsICJvbGRSYW5kb20iLCAic2VlZCIsICJvcHRpb25zIiwgInVzZV9lbnRyb3B5IiwgImtleSIsICJzaG9ydHNlZWQiLCAibWl4a2V5IiwgImZsYXR0ZW4iLCAidG9zdHJpbmciLCAiYXV0b3NlZWQiLCAiYXJjNCIsICJBUkM0IiwgIm4iLCAiZCIsICJ4IiwgInQiLCAia2V5bGVuIiwgIm1lIiwgImkiLCAiaiIsICJzIiwgImNvdW50IiwgInIiLCAib2JqIiwgImRlcHRoIiwgInJlc3VsdCIsICJ0eXAiLCAicHJvcCIsICJzdHJpbmdzZWVkIiwgInNtZWFyIiwgImEiLCAicmVxdWlyZV9rbnV0aF9zaHVmZmxlX3NlZWRlZCIsICJfX2NvbW1vbkpTTWluIiwgImV4cG9ydHMiLCAibW9kdWxlIiwgInJhbmRHZW4iLCAiYXJyYXkiLCAic2VlZCIsICJjdXJyZW50SW5kZXgiLCAidGVtcG9yYXJ5VmFsdWUiLCAicmFuZG9tSW5kZXgiLCAicmFuZCIsICJsb2NhbF9tYWluX2V4cG9ydHMiLCAiX19leHBvcnQiLCAiTG9jYWxBcHAiLCAiaW1wb3J0X2luZGV4IiwgImV2ZW50ZW1pdHRlcjNfZGVmYXVsdCIsICJFdmVudEVtaXR0ZXIiLCAiaW1wb3J0X2tudXRoX3NodWZmbGVfc2VlZGVkIiwgIkNsaWVudEVuZ2luZSIsICJldmVudGVtaXR0ZXIzX2RlZmF1bHQiLCAib3B0aW9ucyIsICJtc2ciLCAibG9nMiIsICJmbG9vciIsICJjZWlsIiwgInNpbiIsICJjb3MiLCAiUEkiLCAibiIsICJuYyIsICJkciIsICJpIiwgImljIiwgIm5wYyIsICJyIiwgImRwaGkiLCAiaXBjIiwgInBoaSIsICJzaHVmZmxlIiwgImJsb3duT3V0Q2FuZGxlQ291bnQiLCAiY2FuZGxlIiwgImRlbHRhTXMiLCAicnVuIiwgIm5vdyIsICJlcnJvciIsICJOb2lzZUFuYWx5c2VyIiwgImV2ZW50ZW1pdHRlcjNfZGVmYXVsdCIsICJidWZmZXJNcyIsICJtZWRpYVN0cmVhbSIsICJlcnIiLCAibCIsICJtaW4iLCAibWF4IiwgImkiLCAiYSIsICJuIiwgIlJlbmRlcmVyIiwgImNvbnRhaW5lciIsICJjYWtlX2RlZmF1bHQiLCAiY2FuZGxlX2xpdF9kZWZhdWx0IiwgInN0YXRlIiwgImNhbmRsZSIsICJjYW5kbGVTdmciLCAiY2FuZGxlX2Jsb3duX291dF9kZWZhdWx0IiwgImkiLCAiU2VydmVyRW5naW5lIiwgImV2ZW50ZW1pdHRlcjNfZGVmYXVsdCIsICJvcHRpb25zIiwgImNsaWVudElkIiwgImNsaWVudFN0YXRlIiwgImRlbHRhTXMiLCAic3RhdGUiLCAiY2xpZW50U3RhdGVzIiwgInJ1biIsICJub3ciLCAiZXJyb3IiLCAiTG9jYWxBcHAiLCAib3B0aW9ucyIsICJTZXJ2ZXJFbmdpbmUiLCAiZSIsICJDbGllbnRFbmdpbmUiLCAiTm9pc2VBbmFseXNlciIsICJSZW5kZXJlciIsICJzdGF0ZSIsICJ3aW5kRm9yY2UiXQp9Cg==</script>
    <script>
      window.onload = () => {
        const app = new BirthdayCake.LocalApp({
          serverEngine: {
            msPerTick: Math.round(1000 / 16),
            candleCount: 26,
            candleLifetimeMs: Math.round(1000 * 0.05),
            targetWindForcePerClient: 0.005,
            firstCandleWindForceFactor: 1.5,
          },
          clientEngine: {
            msPerTick: Math.round(1000 / 16),
            windPhi: 0,
          },
          noiseAnalyser: {
            bufferMs: Math.round(1000 / 16),
          },
          renderer: {
            containerElement: document.getElementById("container"),
          },
        });
      };
    </script>
  </head>
  <body>
    <h1>Birthday Cake (local demo)</h1>
    <p>Blow into the microphone to blow out the candles!</p>
    <main id="container"></main>
  </body>
</html>
